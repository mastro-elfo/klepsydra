{"version":3,"sources":["pages/about/logo.jsx","pages/about/background.svg","pages/utils.js","pages/about.jsx","pages/client/ContactEditItem.jsx","pages/client/ContactItem.jsx","controllers/utils.js","controllers/contact.js","pages/client/ContactList.jsx","pages/settings/context.jsx","db/open.js","db/model.js","db/client.js","controllers/client.js","pages/client/create.jsx","pages/loading.jsx","pages/client/edit.jsx","pages/client/list.jsx","pages/tracker/utils.js","db/performance.js","controllers/performance.js","pages/client/Latest.jsx","pages/client/view.jsx","pages/client.jsx","components/DurationPicker.jsx","components/DurationPickerDialog.jsx","pages/performance/DurationField.jsx","pages/performance/PauseEdit.jsx","controllers/pause.js","pages/performance/PauseEditList.jsx","pages/performance/PaymentEdit.jsx","controllers/payment.js","pages/performance/PaymentEditList.jsx","pages/performance/utils.js","pages/performance/edit.jsx","pages/performance/Loader.jsx","pages/performance/PayDialogButton.jsx","pages/performance/PerformanceListItem.jsx","pages/performance/PrintModal.jsx","pages/performance/PrintTable.jsx","pages/performance/list.jsx","pages/performance/ViewContent.jsx","pages/performance/view.jsx","pages/performance.jsx","pages/settings/ListItemHelp.jsx","pages/settings.jsx","pages/tracker/context.jsx","pages/tracker/Client.jsx","pages/tracker/StopDialogButton.jsx","pages/tracker/Controllers.jsx","pages/tracker/Pause.jsx","pages/tracker/PauseItem.jsx","pages/tracker/Pauses.jsx","pages/tracker/Status.jsx","pages/tracker/Timer.jsx","controllers/tracker.js","pages/tracker.jsx","pages/dashboard/ResultItem.jsx","pages/dashboard/ResultList.jsx","pages/dashboard.jsx","controllers/dashboard.js","pages/notfound.jsx","components/FullPage.js","components/ThemePaper.jsx","components/AppLoading.jsx","AppLoader.jsx","App.jsx","reportWebVitals.js","i18n.js","index.js"],"names":["Logo","props","SvgIcon","id","style","fill","d","transform","fillOpacity","mask","useTitle","title","useEffect","document","route","path","exact","component","useState","licenseDialog","setLicenseDialog","t","useTranslation","header","leftAction","content","List","ListItem","ListItemText","primary","version","secondary","button","onClick","open","onClose","confirm","onConfirm","PaperProps","backgroundImage","background","backgroundSize","backgroundPosition","backgroundRepeat","drawer","key","icon","ContactItem","_contact","contact","onChange","onDelete","setContact","to","setTimeout","clearTimeout","type","value","typeLabel","email","link","phone","handleChange","field","target","TextField","fullWidth","label","InputProps","startAdornment","InputAdornment","position","select","disableUnderline","MenuItem","endAdornment","IconButton","typeIcon","ListItemIcon","merge","defaultValue","keys","Object","data","newObject","assign","filter","k","indexOf","reduce","acc","curr","fromObject","Date","ContactList","_contacts","contacts","edit","setContacts","handleDelete","index","slice","splice","Item","ContactEditItem","subheader","ListSubheader","map","price","enableDiscountRound","discountRound","currency","printTitle","printBefore","printAfter","printNote","intro","load","JSON","parse","localStorage","getItem","Context","createContext","useSettings","useContext","SettingsProvider","children","useMemo","set","settings","setItem","stringify","Provider","PouchDB","plugin","find","Model","table","this","_table","_id","_db","name","options","_indexes","fields","updatedAt","a","Promise","all","createIndex","catch","e","console","error","doc","post","createdAt","get","then","dbdoc","put","_rev","remove","request","allDocs","Client","undefined","surname","init","read","search","query","re","RegExp","split","q","trim","join","selector","$or","$regex","$elemMatch","docs","warning","warn","latest","$gt","sort","limit","replace","useHistory","enqueueSnackbar","useSnackbar","state","useLocation","client","setClient","cast","v","rightAction","create","variant","parseFloat","toFixed","Loading","go","goBack","location","useParams","message","update","r","Component","DangerButton","delete","destroy","DialogProps","cancel","push","list","setList","didSearch","setDidSearch","placeholder","onSearch","_","onClear","href","length","timeDiff","start","end","pauses","delta2hms","delta","toISOString","substr","roundCost","cost","Performance","discount","note","payed","payments","derived","performance","total","balance","due","fromDate","toDate","notPayed","skip","$and","$gte","$lte","client_id","Latest","color","toLocaleString","Array","i","Skeleton","disabled","Create","Edit","View","DurationPicker","DurationPickerDialog","PickerProps","rest","Dialog","DialogTitle","DialogContent","DialogActions","DurationField","actual","seconds","Math","floor","minutes","hours","setOpen","duration","setDuration","fieldValue","setFieldValue","h","String","padStart","m","s","handleConfirm","useCallback","parseInt","initialDuration","Button","PauseEdit","_pause","pause","setPause","handleChangeStart","newPause","format","ampm","views","keyboardIcon","PauseEditList","_pauses","setPauses","pauseFromObject","PaymentEdit","_payment","payment","setPayment","date","PaymentEditList","_payments","setPayments","paymentFromObject","closeTo","expected","precision","abs","pow","setPerformance","handleChangeValue","isNaN","ListItemSecondaryAction","read_client","inputProps","min","multiline","rows","rowsMax","Loader","each","width","heigth","Grid","container","item","xs","sm","Typography","PayDialogButton","selected","onUpdate","onCancel","performanceFromObject","PerformanceListItem","checked","onToggle","Checkbox","PrintModal","onPrint","setPrintTitle","setPrintBefore","setPrintAfter","setPrintNote","isIcon","FormControlLabel","control","onOpen","PrintTable","cur","every","gutterBottom","p","TableContainer","Table","TableHead","TableRow","TableFooter","TableBody","PrintTableRow","Borderless","colSpan","display","align","TableCell","withStyles","root","borderBottom","setSelected","searchQuery","setSearchQuery","print","setPrint","printProps","setPrintProps","setFromDate","setToDate","setNotPayed","setSkip","_selected","window","handleToggle","findIndex","_list","itm","indeterminate","Box","ml","Paper","padding","justify","clearable","maxDate","dataLength","next","hasMore","ViewContent","alignItems","justifyContent","mb","md","ListItemHelp","Tooltip","arrow","cursor","setSettings","useTracker","TrackerProvider","tracker","setTracker","loading","setLoading","searchString","setSearchString","handleSearch","debounce","finally","handleAdd","Autocomplete","freeSolo","getOptionLabel","getOptionSelected","option","renderInput","size","StopDialogButton","status","DialogContentText","final","Controllers","Pause","setLength","ref","useRef","current","focus","inputRef","PauseItem","Pauses","hasPauses","Status","setDate","statusIcon","started","paused","stopped","toLocaleDateString","toLocaleTimeString","Timer","timer","setTimer","pauseRef","_pauseEnd","ResultItem","ResultList","Icon","alt","clientList","setClientList","performanceList","setPerformanceList","latest_client","latest_performance","clients","performances","lists","items","about","search_client","search_performance","count","ClientIcon","PerformanceIcon","paragraph","FullPage","StyledComponent","styled","height","theme","palette","main","getContrastText","ThemePaper","AppLoading","square","elevation","alignContent","AppLoader","LinearProgress","App","initialized","setInitialized","prefersDarkMode","useMediaQuery","client_init","performance_init","ThemeProps","RouterProps","Router","BrowserRouter","routes","dashboard","notfound","basename","WrapperProps","Children","MuiPickersUtilsProvider","utils","DateFnsUtils","NotifyProps","anchorOrigin","vertical","horizontal","ConfigProps","TopFab","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","i18n","use","Backend","LanguageDetector","initReactI18next","fallbackLng","backend","backends","LocalStorageBackend","Fetch","backendOptions","prefix","expirationTime","defaultVersion","LocalStorageBackendOptions","loadPath","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.f8955693.chunk.js","sourcesContent":["import { SvgIcon } from \"@material-ui/core\";\n\nexport default function Logo(props) {\n  return (\n    <SvgIcon {...props}>\n      <defs>\n        <mask id=\"mask-0\">\n          <path\n            style={{ fill: \"rgb(255, 255, 255)\" }}\n            d=\"M 175 0 L 325 0 C 425 0 255 200 255 250 C 255 300 425 500 325 500 L 175 500 C 75 500 245 300 245 250 C 245 200 75 0 175 0 Z\"\n          >\n            <title>SandMask</title>\n          </path>\n        </mask>\n      </defs>\n      <g transform=\"matrix(0.048, 0, 0, 0.048, 0.004347, -0.000001)\">\n        <path\n          style={{ fill: \"rgb(216, 216, 216)\", fillOpacity: 0.25 }}\n          d=\"M 175 0 L 325 0 C 425 0 255 200 255 250 C 255 300 425 500 325 500 L 175 500 C 75 500 245 300 245 250 C 245 200 75 0 175 0 Z\"\n        >\n          <title>BackGlass</title>\n        </path>\n        <path\n          style={{ fill: \"rgb(255, 187, 0)\", mask: \"url(#mask-0)\" }}\n          d=\"M 175 500 C 74.558 500 240 400 250 400 C 260 400 425 500 325 500 L 175 500 Z M 350 100 C 325 125 255 260 250 260 C 245 260 175 125 150 100 C 225 125 275 125 350 100 Z\"\n        >\n          <title>Sand</title>\n        </path>\n        <path\n          style={{ fill: \"rgb(216, 216, 216)\", fillOpacity: 0.25 }}\n          d=\"M 175 0 L 325 0 C 425 0 255 200 255 250 C 255 300 425 500 325 500 L 175 500 C 75 500 245 300 245 250 C 245 200 75 0 175 0 Z\"\n        >\n          <title>FrontGlass</title>\n        </path>\n        <path\n          style={{ fill: \"rgb(255, 255, 255)\", fillOpacity: 0.5 }}\n          d=\"M 200 0 C 149.993 49.967 250 200 250 250 C 250 300 150 450 200 500 L 250 500 C 200 450 250 300 250 250 C 250 200 200.181 49.154 250 0 L 200 0 Z\"\n        >\n          <title>Light</title>\n        </path>\n      </g>\n    </SvgIcon>\n  );\n}\n\n// export default function Logo(props) {\n//   return (\n//     <SvgIcon {...props}>\n//       <defs>\n//         <mask id=\"mask-0\">\n//           <path\n//             style={{ fill: \"rgb(255, 255, 255)\" }}\n//             d=\"M 9.605 0 L 14.405 0 C 19.205 0 12.245 9.6 12.245 12 C 12.245 14.4 19.205 24 14.405 24 L 9.605 24 C 4.805 24 11.765 14.4 11.765 12 C 11.765 9.6 4.805 0 9.605 0 Z\"\n//           >\n//             <title>SandMask</title>\n//           </path>\n//         </mask>\n//       </defs>\n//       <path\n//         style={{ fill: \"rgb(216, 216, 216)\", fillOpacity: 0.25 }}\n//         d=\"M 9.6 0 L 14.4 0 C 19.2 0 12.24 9.6 12.24 12 C 12.24 14.4 19.2 24 14.4 24 L 9.6 24 C 4.8 24 11.76 14.4 11.76 12 C 11.76 9.6 4.8 0 9.6 0 Z\"\n//       >\n//         <title>BackGlass</title>\n//       </path>\n//       <path\n//         style={{ fill: \"rgb(255, 187, 0)\", mask: \"url(#mask-0)\" }}\n//         d=\"M 9.605 24 C 4.783 24 11.525 19.2 12.005 19.2 C 12.485 19.2 19.205 24 14.405 24 Z M 15.605 4.8 C 14.405 6 12.245 12.48 12.005 12.48 C 11.765 12.48 9.605 6 8.405 4.8 C 12.005 6 12.005 6 15.605 4.8 Z\"\n//       >\n//         <title>Sand</title>\n//       </path>\n//       <path\n//         style={{ fill: \"rgb(216, 216, 216)\", fillOpacity: 0.25 }}\n//         d=\"M 9.6 0 L 14.4 0 C 19.2 0 12.24 9.6 12.24 12 C 12.24 14.4 19.2 24 14.4 24 L 9.6 24 C 4.8 24 11.76 14.4 11.76 12 C 11.76 9.6 4.8 0 9.6 0 Z\"\n//       >\n//         <title>FrontGlass</title>\n//       </path>\n//       <path\n//         style={{ fill: \"rgb(255, 255, 255)\", fillOpacity: 0.5 }}\n//         d=\"M 9.6 0 C 7.199 2.398 12 9.6 12 12 C 12 14.4 7.2 21.6 9.6 24 L 12 24 C 9.6 21.6 12 14.4 12 12 C 12 9.6 9.608 2.359 12 0 L 9.6 0 Z\"\n//       >\n//         <title>Light</title>\n//       </path>\n//     </SvgIcon>\n//   );\n// }\n","export default __webpack_public_path__ + \"static/media/background.d22ce5ba.svg\";","import { useEffect } from \"react\";\n\nexport function useTitle(title) {\n  useEffect(() => {\n    if (title) {\n      document.title = `Klepsýdra - ${title}`;\n    } else {\n      document.title = \"Klepsýdra\";\n    }\n  }, [title]);\n}\n","import { useState } from \"react\";\nimport { useTranslation } from \"react-i18next\";\n\nimport {\n  List,\n  ListItem,\n  // ListItemIcon,\n  // ListItemSecondaryAction,\n  ListItemText,\n  // ListSubheader,\n} from \"@material-ui/core\";\nimport {\n  BackIconButton,\n  ConfirmDialog,\n  Content,\n  Header,\n  Page,\n} from \"mastro-elfo-mui\";\nimport DrawerIcon from \"./about/logo\";\nimport background from \"./about/background.svg\";\n\nimport { useTitle } from \"./utils\";\nimport { version } from \"../version.json\";\n\nfunction Component() {\n  const [licenseDialog, setLicenseDialog] = useState(false);\n  const { t } = useTranslation();\n  useTitle(t(\"About.Key\"));\n\n  return (\n    <Page\n      header={<Header leftAction={<BackIconButton />}>Informazioni</Header>}\n      content={\n        <Content>\n          <List>\n            <ListItem>\n              <ListItemText primary={version} secondary={t(\"Version\")} />\n            </ListItem>\n            <ListItem>\n              <ListItemText\n                primary=\"Francesco Michienzi\"\n                secondary={t(\"Software Development\")}\n              />\n            </ListItem>\n            <ListItem button onClick={() => setLicenseDialog(true)}>\n              <ListItemText\n                primary=\"Copyright (c) 2021 mastro-elfo\"\n                secondary={t(\"MIT License\")}\n              />\n            </ListItem>\n          </List>\n          <ConfirmDialog\n            open={licenseDialog}\n            onClose={() => setLicenseDialog(false)}\n            content={[\n              \"Copyright (c) 2021 mastro-elfo\",\n              'Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the \"Software\"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:',\n              \"The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.\",\n              'THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.',\n            ]}\n            confirm=\"Letto\"\n            onConfirm={() => setLicenseDialog(false)}\n          ></ConfirmDialog>\n        </Content>\n      }\n      PaperProps={{\n        style: {\n          backgroundImage: `url(${background})`,\n          backgroundSize: \"auto 50%\",\n          backgroundPosition: \"right bottom\",\n          backgroundRepeat: \"no-repeat\",\n        },\n      }}\n    />\n  );\n}\n\nexport const route = {\n  path: \"/about\",\n  exact: true,\n  component: Component,\n};\n\nexport const drawer = {\n  key: \"about\",\n  primary: \"About.Key\",\n  secondary: `v${version}`,\n  icon: <DrawerIcon />,\n  title: \"$t(Open) $t(About.Key)\",\n};\n","import { useEffect, useState } from \"react\";\nimport { useTranslation } from \"react-i18next\";\n\nimport {\n  IconButton,\n  InputAdornment,\n  ListItem,\n  MenuItem,\n  TextField,\n} from \"@material-ui/core\";\n\nimport DeleteIcon from \"@material-ui/icons/Delete\";\nimport EmailIcon from \"@material-ui/icons/Email\";\nimport LinkIcon from \"@material-ui/icons/Link\";\nimport PhoneIcon from \"@material-ui/icons/Phone\";\n\nexport default function ContactItem({ contact: _contact, onChange, onDelete }) {\n  const { t } = useTranslation();\n  const [contact, setContact] = useState(_contact);\n\n  useEffect(() => {\n    const to = setTimeout(onChange, 100, contact);\n    return () => clearTimeout(to);\n    // eslint-disable-next-line\n  }, [contact]);\n\n  const { type, value } = contact;\n\n  const typeLabel =\n    {\n      email: t(\"Email\"),\n      link: t(\"Link\"),\n      phone: t(\"Telephone\"),\n    }[type] || t(\"Undefined\");\n\n  const handleChange = (field) => ({ target: { value } }) =>\n    setContact({ ...contact, [field]: value });\n\n  return (\n    <ListItem>\n      <TextField\n        fullWidth\n        value={value}\n        onChange={handleChange(\"value\")}\n        label={typeLabel}\n        InputProps={{\n          startAdornment: (\n            <InputAdornment position=\"start\">\n              <TextField\n                select\n                value={type}\n                onChange={handleChange(\"type\")}\n                InputProps={{ disableUnderline: true }}\n              >\n                <MenuItem value=\"email\">\n                  <EmailIcon />\n                </MenuItem>\n                <MenuItem value=\"link\">\n                  <LinkIcon />\n                </MenuItem>\n                <MenuItem value=\"phone\">\n                  <span></span>\n                  <PhoneIcon />\n                </MenuItem>\n              </TextField>\n            </InputAdornment>\n          ),\n          endAdornment: (\n            <InputAdornment position=\"end\">\n              <IconButton onClick={onDelete}>\n                <DeleteIcon />\n              </IconButton>\n            </InputAdornment>\n          ),\n        }}\n      />\n    </ListItem>\n  );\n}\n","import { ListItem, ListItemIcon, ListItemText } from \"@material-ui/core\";\nimport { useTranslation } from \"react-i18next\";\n\nimport BrokenImageIcon from \"@material-ui/icons/BrokenImage\";\nimport EmailIcon from \"@material-ui/icons/Email\";\nimport LinkIcon from \"@material-ui/icons/Link\";\nimport PhoneIcon from \"@material-ui/icons/Phone\";\n\nexport default function ContactItem({ contact }) {\n  const { t } = useTranslation();\n  const { type, value } = contact;\n\n  const typeIcon = {\n    email: <EmailIcon />,\n    link: <LinkIcon />,\n    phone: <PhoneIcon />,\n  }[type] || <BrokenImageIcon />;\n\n  const typeLabel =\n    {\n      email: t(\"Email\"),\n      link: t(\"Link\"),\n      phone: t(\"Telephone\"),\n    }[type] || t(\"Undefined\");\n\n  return (\n    <ListItem>\n      <ListItemIcon>{typeIcon}</ListItemIcon>\n      <ListItemText primary={value} secondary={typeLabel} />\n    </ListItem>\n  );\n}\n","export function merge(defaultValue, ...data) {\n  const keys = Object.keys(defaultValue);\n  const newObject = Object.assign(defaultValue, ...data);\n  return Object.keys(newObject)\n    .filter((k) => keys.indexOf(k) !== -1)\n    .reduce((acc, curr) => ({ ...acc, [curr]: newObject[curr] }), {});\n}\n","import { merge } from \"./utils\";\n\nexport const defaultValue = {\n  id: null,\n  type: \"email\",\n  value: \"\",\n};\n\nexport function fromObject(...data) {\n  return merge(defaultValue, { id: +new Date() }, ...data);\n}\n","import { useEffect, useState } from \"react\";\n\nimport {\n  List,\n  ListItem,\n  ListItemIcon,\n  ListItemText,\n  ListSubheader,\n} from \"@material-ui/core\";\n\nimport ContactEditItem from \"./ContactEditItem\";\nimport ContactItem from \"./ContactItem\";\nimport { fromObject } from \"../../controllers/contact\";\n\nimport AddIcon from \"@material-ui/icons/Add\";\n\nexport default function ContactList({\n  contacts: _contacts,\n  edit = false,\n  onChange,\n}) {\n  const [contacts, setContacts] = useState(_contacts);\n\n  useEffect(() => {\n    const to = setTimeout(onChange, 100, contacts);\n    return () => clearTimeout(to);\n    // eslint-disable-next-line\n  }, [contacts]);\n\n  const handleAdd = () => setContacts([fromObject(), ...contacts]);\n\n  const handleDelete = (index) => () => {\n    const _contacts = contacts.slice();\n    _contacts.splice(index, 1);\n    setContacts(_contacts);\n  };\n\n  const handleChange = (index) => (contact) => {\n    const _contacts = contacts.slice();\n    _contacts[index] = contact;\n    setContacts(_contacts);\n  };\n\n  const Item = edit ? ContactEditItem : ContactItem;\n\n  return (\n    <List subheader={<ListSubheader>Contatti</ListSubheader>}>\n      {!!edit && (\n        <ListItem button onClick={handleAdd}>\n          <ListItemIcon>\n            <AddIcon />\n          </ListItemIcon>\n          <ListItemText primary=\"Aggiungi\" />\n        </ListItem>\n      )}\n      {contacts.map((contact, index) => {\n        return (\n          <Item\n            key={contact.id}\n            contact={contact}\n            onChange={handleChange(index)}\n            onDelete={handleDelete(index)}\n          />\n        );\n      })}\n    </List>\n  );\n}\n","import { createContext, useContext, useEffect, useMemo, useState } from \"react\";\n\nconst defaultValue = {\n  price: 10,\n  enableDiscountRound: false,\n  discountRound: 1,\n  currency: \"€\",\n  printTitle: \"\",\n  printBefore: \"\",\n  printAfter: \"\",\n  printNote: true,\n  intro: true,\n};\n\nfunction dump(settings) {\n  localStorage.setItem(\"settings\", JSON.stringify(settings));\n}\n\nfunction load() {\n  try {\n    return Object.assign(\n      defaultValue,\n      JSON.parse(localStorage.getItem(\"settings\"))\n    );\n  } catch {\n    return defaultValue;\n  }\n}\n\nconst Context = createContext();\n\nexport function useSettings() {\n  return useContext(Context);\n}\n\nexport default function SettingsProvider({ children, defaultValue }) {\n  const [value, set] = useState({\n    ...defaultValue,\n    ...useMemo(load, []),\n  });\n\n  useEffect(() => {\n    dump(value);\n  }, [value]);\n\n  return <Context.Provider value={[value, set]}>{children}</Context.Provider>;\n}\n","import PouchDB from \"pouchdb\";\nimport find from \"pouchdb-find\";\nPouchDB.plugin(find);\nexport default function open(name, options = {}) {\n  return new PouchDB(name, options);\n}\n","import open from \"./open\";\n\nexport default class Model {\n  constructor(table, id) {\n    this._table = table;\n    this._id = id;\n    this._db = open(table);\n    this._indexes = [\n      {\n        fields: [{ updatedAt: \"desc\" }],\n        name: \"idx_updatedAt\",\n      },\n    ];\n  }\n\n  async init() {\n    return Promise.all(\n      this._indexes.map((index) => this._db.createIndex({ index }))\n    ).catch((e) => {\n      console.error(e);\n    });\n  }\n\n  create(doc, options = {}) {\n    // https://pouchdb.com/api.html#create_document\n    // {\n    //   \"ok\" : true,\n    //   \"id\" : \"8A2C3761-FFD5-4770-9B8C-38C33CED300A\",\n    //   \"rev\" : \"1-d3a8e0e5aa7c8fff0c376dac2d8a4007\"\n    // }\n    return this._db.post(\n      {\n        createdAt: new Date(),\n        updatedAt: new Date(),\n        ...doc,\n      },\n      options\n    );\n  }\n\n  read(options = {}) {\n    // https://pouchdb.com/api.html#fetch_document\n    return this._db.get(this._id, options);\n  }\n\n  update(doc, options = {}) {\n    // https://pouchdb.com/api.html#create_document\n    return this._db.get(this._id).then((dbdoc) =>\n      this._db.put(\n        {\n          _id: this._id,\n          _rev: dbdoc._rev,\n          ...doc,\n          updatedAt: new Date(),\n        },\n        options\n      )\n    );\n  }\n\n  delete(options = {}) {\n    // https://pouchdb.com/api.html#delete_document\n    return this._db.get(this._id).then((dbdoc) => this._db.remove(dbdoc));\n  }\n\n  search(request) {\n    // https://pouchdb.com/api.html#query_index\n    return this._db.find(request);\n  }\n\n  all(options = {}) {\n    return this._db.allDocs(options);\n  }\n}\n","import Model from \"./model\";\n\nexport default class Client extends Model {\n  constructor(id) {\n    super(\"client\", id);\n  }\n}\n","import { merge } from \"./utils\";\nimport Client from \"../db/client\";\n\nexport const defaultValue = {\n  _id: undefined,\n  contacts: [],\n  name: \"\",\n  price: 0,\n  surname: \"\",\n  // TODO: Deprecated, will be removed soon\n  // email: \"\",\n  // telephone: \"\",\n};\n\nexport function fromObject(...data) {\n  return merge(defaultValue, ...data);\n}\n\nconst fields = [\n  \"_id\",\n  \"contacts\",\n  \"name\",\n  \"price\",\n  \"surname\",\n  // TODO: Deprecated, will be removed soon\n  // \"email\",\n  // \"telephone\",\n];\n\nexport async function init() {\n  return new Client().init();\n}\n\nexport function create(data) {\n  return new Client().create(data);\n}\n\nexport function read(id) {\n  return new Client(id).read();\n}\n\nexport function update(id, data) {\n  return new Client(id).update(data);\n}\n\nexport function destroy(id) {\n  return new Client(id).delete();\n}\n\nexport function search(query) {\n  const re = RegExp(\n    query\n      .split(\" \")\n      .filter((q) => !!q.trim())\n      .map((q) => `.*${q}.*`)\n      .join(\"|\"),\n    \"i\"\n  );\n  return new Client()\n    .search({\n      selector: {\n        $or: [\n          { name: { $regex: re } },\n          { surname: { $regex: re } },\n          { contacts: { $elemMatch: { value: { $regex: re } } } },\n        ],\n      },\n      fields,\n    })\n    .then(({ docs, warning }) => {\n      if (warning) console.warn(warning);\n      return docs;\n    });\n}\n\nexport function latest() {\n  return new Client()\n    .search({\n      selector: {\n        updatedAt: { $gt: null },\n      },\n      fields,\n      sort: [{ updatedAt: \"desc\" }],\n      limit: 10,\n    })\n    .then(({ docs, warning }) => {\n      if (warning) console.warn(warning);\n      return docs;\n    });\n}\n","import { useState } from \"react\";\nimport { useHistory, useLocation } from \"react-router-dom\";\nimport { useSnackbar } from \"notistack\";\n\nimport {\n  IconButton,\n  InputAdornment,\n  List,\n  ListItem,\n  TextField,\n} from \"@material-ui/core\";\nimport { BackIconButton, Content, Header, Page } from \"mastro-elfo-mui\";\n\nimport ContactList from \"./ContactList\";\nimport { useSettings } from \"../settings/context\";\nimport { create, fromObject } from \"../../controllers/client\";\n\nimport SaveIcon from \"@material-ui/icons/Save\";\n\nfunction Component() {\n  const { replace } = useHistory();\n  const { enqueueSnackbar } = useSnackbar();\n  const { state } = useLocation();\n  const [settings] = useSettings();\n  const [client, setClient] = useState(\n    fromObject({\n      price: settings.price,\n      ...state,\n    })\n  );\n\n  const handleChange = (field, cast = (v) => v) => ({ target: { value } }) =>\n    setClient({ ...client, [field]: cast(value) });\n\n  const handleChangeValue = (field) => (value) =>\n    setClient({ ...client, [field]: value });\n\n  const handleSave = () => {\n    create(fromObject(client))\n      .then(({ id }) => {\n        // console.log(r);\n        enqueueSnackbar(\"Documento creato\", { variant: \"success\" });\n        setTimeout(replace, 500, `/client/view/${id}`);\n      })\n      .catch((e) => {\n        console.error(e);\n        enqueueSnackbar(\"Errore\", { variant: \"error\" });\n      });\n  };\n\n  const { contacts, name, surname, price } = client;\n\n  return (\n    <Page\n      header={\n        <Header\n          leftAction={<BackIconButton />}\n          rightAction={\n            <IconButton onClick={handleSave}>\n              <SaveIcon />\n            </IconButton>\n          }\n        >\n          Crea Studente\n        </Header>\n      }\n      content={\n        <Content>\n          <List>\n            <ListItem>\n              <TextField\n                fullWidth\n                label=\"Nome\"\n                value={name}\n                onChange={handleChange(\"name\")}\n              />\n            </ListItem>\n            <ListItem>\n              <TextField\n                fullWidth\n                label=\"Cognome\"\n                value={surname}\n                onChange={handleChange(\"surname\")}\n              />\n            </ListItem>\n            <ListItem>\n              <TextField\n                fullWidth\n                label=\"Tariffa\"\n                type=\"number\"\n                value={parseFloat(price || 0).toFixed(2)}\n                onChange={handleChange(\"price\", parseFloat)}\n                InputProps={{\n                  startAdornment: (\n                    <InputAdornment position=\"start\">\n                      {settings.currency}/h\n                    </InputAdornment>\n                  ),\n                }}\n              />\n            </ListItem>\n          </List>\n          <ContactList\n            edit={true}\n            contacts={contacts}\n            onChange={handleChangeValue(\"contacts\")}\n          />\n        </Content>\n      }\n    />\n  );\n}\n\nexport const route = {\n  path: \"/client/create\",\n  exact: true,\n  component: Component,\n};\n","import { IconButton } from \"@material-ui/core\";\nimport { Content, Header, Page } from \"mastro-elfo-mui\";\nimport WaitIcon from \"@material-ui/icons/HourglassEmpty\";\n\nexport default function Loading({ children, title = \"Loading...\" }) {\n  return (\n    <Page\n      header={\n        <Header\n          leftAction={\n            <IconButton>\n              <WaitIcon />\n            </IconButton>\n          }\n        >\n          {title}\n        </Header>\n      }\n      content={<Content>{children}</Content>}\n    />\n  );\n}\n","import { useEffect, useState } from \"react\";\nimport { useHistory, useParams } from \"react-router-dom\";\nimport { useSnackbar } from \"notistack\";\nimport {\n  IconButton,\n  InputAdornment,\n  List,\n  ListItem,\n  TextField,\n} from \"@material-ui/core\";\nimport {\n  BackIconButton,\n  ConfirmDialogButton,\n  Content,\n  DangerButton,\n  Header,\n  Page,\n} from \"mastro-elfo-mui\";\n\nimport ContactList from \"./ContactList\";\nimport Loading from \"../loading\";\nimport { useSettings } from \"../settings/context\";\nimport { fromObject, read, update, destroy } from \"../../controllers/client\";\n\nimport SaveIcon from \"@material-ui/icons/Save\";\n\nfunction Component() {\n  const { go, goBack, location } = useHistory();\n  const { id } = useParams();\n  const { enqueueSnackbar } = useSnackbar();\n  const [client, setClient] = useState(location.state);\n  const [settings] = useSettings();\n\n  useEffect(() => {\n    if (!client) {\n      read(id)\n        .then((doc) => {\n          // console.log(doc);\n          setClient(fromObject(doc));\n        })\n        .catch((e) => {\n          console.error(e);\n          enqueueSnackbar(`${e.name} ${e.message}`, { variant: \"error\" });\n        });\n    }\n    // eslint-disable-next-line\n  }, [id, client]);\n\n  if (!client) {\n    return <Loading />;\n  }\n\n  const handleChange = (field, cast = (v) => v) => ({ target: { value } }) =>\n    setClient({ ...client, [field]: cast(value) });\n\n  const handleChangeValue = (field) => (value) =>\n    setClient({ ...client, [field]: value });\n\n  const handleSave = () => {\n    update(id, client)\n      .then((r) => {\n        // console.log(r);\n        enqueueSnackbar(\"Modifiche salvate\", { variant: \"success\" });\n        setTimeout(goBack, 500);\n      })\n      .catch((e) => {\n        console.error(e);\n        enqueueSnackbar(`${e.name} ${e.message}`, { variant: \"error\" });\n      });\n  };\n\n  const handleDelete = () => {\n    destroy(id)\n      .then((r) => {\n        // console.log(r);\n        enqueueSnackbar(\"Studente eliminato\", { variant: \"success\" });\n        setTimeout(go, 500, -2);\n      })\n      .catch((e) => {\n        console.error(e);\n        enqueueSnackbar(`${e.name} ${e.message}`, { variant: \"error\" });\n      });\n  };\n\n  const { contacts, name, surname, price } = client;\n\n  return (\n    <Page\n      header={\n        <Header\n          leftAction={<BackIconButton />}\n          rightAction={\n            <IconButton onClick={handleSave}>\n              <SaveIcon />\n            </IconButton>\n          }\n        >\n          Modifica\n        </Header>\n      }\n      content={\n        <Content>\n          <List>\n            <ListItem>\n              <TextField\n                fullWidth\n                label=\"Nome\"\n                value={name || \"\"}\n                onChange={handleChange(\"name\")}\n              />\n            </ListItem>\n            <ListItem>\n              <TextField\n                fullWidth\n                label=\"Cognome\"\n                value={surname || \"\"}\n                onChange={handleChange(\"surname\")}\n              />\n            </ListItem>\n            <ListItem>\n              <TextField\n                fullWidth\n                label=\"Tariffa\"\n                type=\"number\"\n                value={parseFloat(price || 0).toFixed(2)}\n                onChange={handleChange(\"price\", parseFloat)}\n                InputProps={{\n                  startAdornment: (\n                    <InputAdornment position=\"start\">\n                      {settings.currency}/h\n                    </InputAdornment>\n                  ),\n                }}\n              />\n            </ListItem>\n          </List>\n\n          <ContactList\n            contacts={contacts}\n            edit\n            onChange={handleChangeValue(\"contacts\")}\n          />\n\n          <List>\n            <ListItem>\n              <ConfirmDialogButton\n                variant=\"contained\"\n                Component={DangerButton}\n                onConfirm={handleDelete}\n                DialogProps={{\n                  title: \"Elimina Studente\",\n                  content: `Confermi di eliminare \"${name} ${surname}\"?`,\n                  confirm: \"Elimina\",\n                  cancel: \"Annulla\",\n                }}\n              >\n                Elimina\n              </ConfirmDialogButton>\n            </ListItem>\n          </List>\n        </Content>\n      }\n    />\n  );\n}\n\nexport const route = {\n  path: \"/client/edit/:id\",\n  exact: true,\n  component: Component,\n};\n","import { useEffect, useState } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport { useSnackbar } from \"notistack\";\nimport { useTranslation } from \"react-i18next\";\n\nimport { IconButton, List, ListItem, ListItemText } from \"@material-ui/core\";\n\nimport {\n  BackIconButton,\n  Content,\n  Header,\n  HeaderSearchField,\n  Page,\n  Push,\n} from \"mastro-elfo-mui\";\n\nimport AddIcon from \"@material-ui/icons/Add\";\n\nimport { latest, search } from \"../../controllers/client\";\n\nfunction Component() {\n  const { push } = useHistory();\n  const { enqueueSnackbar } = useSnackbar();\n  const [list, setList] = useState([]);\n  const [didSearch, setDidSearch] = useState(false);\n  const { t } = useTranslation();\n\n  useEffect(() => {\n    if (!didSearch) {\n      setDidSearch(true);\n      // Load latest\n      latest()\n        .then((docs) => setList(docs))\n        .catch((e) => {\n          console.error(e);\n          enqueueSnackbar(`${e.name} ${e.message}`, { variant: \"error\" });\n        });\n    }\n    // eslint-disable-next-line\n  }, [didSearch]);\n\n  const handleSearch = (_, q) => {\n    if (q === \"\") {\n      setDidSearch(false);\n    } else {\n      setDidSearch(true);\n      search(q)\n        .then((docs) => setList(docs))\n        .catch((e) => {\n          console.error(e);\n          enqueueSnackbar(`${e.name} ${e.message}`, { variant: \"error\" });\n        });\n    }\n  };\n\n  const handleClear = () => {\n    setDidSearch(false);\n  };\n\n  return (\n    <Page\n      header={\n        <Header\n          leftAction={[\n            <BackIconButton key=\"back\" />,\n            <HeaderSearchField\n              key=\"search\"\n              fullWidth\n              placeholder={t(\"Client.Search\")}\n              onSearch={handleSearch}\n              onClear={handleClear}\n            />,\n          ]}\n          rightAction={\n            <Push key=\"create\" href=\"/client/create\">\n              <IconButton>\n                <AddIcon />\n              </IconButton>\n            </Push>\n          }\n        ></Header>\n      }\n      content={\n        <Content>\n          <List>\n            {list.map(({ _id, name, surname, contacts }) => (\n              <ListItem\n                key={_id}\n                button\n                onClick={() => push(`/client/view/${_id}`)}\n              >\n                <ListItemText\n                  primary={`${name} ${surname}`}\n                  secondary={`${\n                    contacts && contacts.length ? contacts[0].value : \"\"\n                  }`}\n                />\n              </ListItem>\n            ))}\n          </List>\n        </Content>\n      }\n    />\n  );\n}\n\nexport const route = {\n  path: \"/client\",\n  exact: true,\n  component: Component,\n};\n","/**\n * Evaluates the time difference between start and end and subtract the pauses\n * @param  {Date} start\n * @param  {Date} end\n * @param  {array} pauses\n * @return {number}\n */\nexport function timeDiff(start, end, pauses = []) {\n  return pauses.reduce(\n    (acc, { start, end }) => acc - (end ? new Date(end) - new Date(start) : 0),\n    new Date(end) - new Date(start)\n  );\n}\n\nexport function delta2hms(delta) {\n  try {\n    return new Date(delta).toISOString().substr(11, 8);\n    // return new Date(delta).toLocaleTimeString();\n  } catch {\n    return \"00:00:00\";\n  }\n}\n\nexport function roundCost(cost, value) {\n  if (cost <= value) {\n    return 0;\n  }\n  return cost % value;\n}\n","import Model from \"./model\";\n\nexport default class Performance extends Model {\n  constructor(id) {\n    super(\"performance\", id);\n    this._indexes.push({\n      fields: [{ start: \"desc\" }],\n      name: \"idx_start\",\n    });\n  }\n}\n","import { merge } from \"./utils\";\nimport { timeDiff } from \"../pages/tracker/utils\";\nimport Performance from \"../db/performance\";\n\nexport const defaultValue = {\n  _id: undefined,\n  client: null,\n  discount: 0,\n  end: null,\n  // length: 0,\n  note: \"\",\n  pauses: [],\n  payed: false,\n  payments: [],\n  price: 0,\n  start: null,\n  // status: null,\n};\n\nexport function fromObject(...data) {\n  return merge(defaultValue, ...data);\n}\n\nexport function derived(performance) {\n  const { discount, end, pauses, payments, price, start } = performance;\n  const length = timeDiff(start, end, pauses);\n  const cost = (length / 1000 / 3600) * price;\n  const total = cost - discount;\n  const balance = (payments || []).reduce((acc, { value }) => acc + value, 0);\n  const due = total - balance;\n  return { balance, cost, due, length, total };\n}\n\nconst fields = [\n  \"_id\",\n  \"client\",\n  \"discount\",\n  \"end\",\n  // \"length\",\n  \"note\",\n  \"pauses\",\n  \"payed\",\n  \"payments\",\n  \"price\",\n  \"start\",\n];\n\nexport async function init() {\n  return new Performance().init();\n}\n\nexport function create(data) {\n  return new Performance().create(data);\n}\n\nexport function read(id) {\n  return new Performance(id).read();\n}\n\nexport function update(id, data) {\n  return new Performance(id).update(data);\n}\n\nexport function destroy(id) {\n  return new Performance(id).delete();\n}\n\nexport function search(\n  query,\n  { fromDate = null, toDate = null, notPayed = false, skip = 0 } = {}\n) {\n  // const re = RegExp(`.*${query}.*`, \"i\");\n  const re = RegExp(\n    query\n      .split(\" \")\n      .map((q) => `.*${q}.*`)\n      .join(\"|\"),\n    \"i\"\n  );\n  return new Performance()\n    .search({\n      selector: {\n        $and: [\n          {\n            start: {\n              $gte: fromDate ? fromDate.toISOString() : null,\n              $lte: toDate ? toDate.toISOString() : new Date().toISOString(),\n            },\n          },\n          notPayed ? { payed: false } : { payed: { $gte: null } },\n          {\n            $or: [\n              { \"client.name\": { $regex: re } },\n              { \"client.surname\": { $regex: re } },\n            ],\n          },\n        ],\n      },\n      fields,\n      sort: [{ start: \"desc\" }],\n      limit: 10,\n      skip,\n    })\n    .then(({ docs, warning }) => {\n      if (warning) console.warn(warning);\n      return docs;\n    });\n}\n\nexport function latest({\n  client_id = null,\n  fromDate = null,\n  toDate = null,\n  notPayed = false,\n  skip = 0,\n} = {}) {\n  return new Performance()\n    .search({\n      selector: {\n        $and: [\n          {\n            start: {\n              $gte: fromDate ? fromDate.toISOString() : null,\n              $lte: toDate ? toDate.toISOString() : new Date().toISOString(),\n            },\n          },\n          notPayed ? { payed: false } : { payed: { $gte: null } },\n          client_id ? { \"client._id\": client_id } : {},\n        ],\n      },\n      fields,\n      sort: [{ start: \"desc\" }],\n      limit: 10,\n      skip,\n    })\n    .then(({ docs, warning }) => {\n      if (warning) console.warn(warning);\n      return docs;\n    });\n}\n","import { useEffect, useState } from \"react\";\nimport { useSnackbar } from \"notistack\";\nimport {\n  List,\n  ListItem,\n  ListItemIcon,\n  ListItemText,\n  ListSubheader,\n} from \"@material-ui/core\";\nimport Skeleton from \"@material-ui/lab/Skeleton\";\nimport { Push } from \"mastro-elfo-mui\";\n\nimport { latest } from \"../../controllers/performance\";\n\nimport CheckIcon from \"@material-ui/icons/CheckCircle\";\n\nexport default function Latest({ id }) {\n  const { enqueueSnackbar } = useSnackbar();\n  const [list, setList] = useState();\n\n  useEffect(() => {\n    latest({ client_id: id })\n      .then((docs) => setList(docs))\n      .catch((e) => {\n        console.error(e);\n        enqueueSnackbar(`${e.name} ${e.message}`, { variant: \"error\" });\n      });\n    // eslint-disable-next-line\n  }, [id]);\n\n  if (!list)\n    return (\n      <List>\n        {Array(10)\n          .fill(true)\n          .map((_, i) => (\n            <ListItem key={i}>\n              <ListItemText primary={<Skeleton />} secondary={<Skeleton />} />\n            </ListItem>\n          ))}\n      </List>\n    );\n\n  return (\n    <List\n      subheader={\n        <ListSubheader>Ultime prestazioni ({list.length})</ListSubheader>\n      }\n    >\n      {list.map(({ _id, note, payed, start }) => (\n        <Push key={_id} href={`/performance/view/${_id}`}>\n          <ListItem button>\n            <ListItemIcon>\n              {!!payed && <CheckIcon color=\"secondary\" />}\n            </ListItemIcon>\n            <ListItemText\n              primary={note}\n              secondary={new Date(start).toLocaleString()}\n            />\n          </ListItem>\n        </Push>\n      ))}\n    </List>\n  );\n}\n","import { useEffect, useState } from \"react\";\nimport { useHistory, useParams } from \"react-router-dom\";\nimport { useSnackbar } from \"notistack\";\nimport { IconButton, List, ListItem, ListItemText } from \"@material-ui/core\";\nimport { BackIconButton, Content, Header, Page, Push } from \"mastro-elfo-mui\";\n\nimport ContactList from \"./ContactList\";\nimport Latest from \"./Latest\";\nimport Loading from \"../loading\";\nimport { useSettings } from \"../settings/context\";\nimport { fromObject, read } from \"../../controllers/client\";\n\nimport EditIcon from \"@material-ui/icons/Edit\";\nimport StartIcon from \"@material-ui/icons/PlayArrow\";\n\nfunction Component() {\n  const { id } = useParams();\n  const { replace } = useHistory();\n  const { enqueueSnackbar } = useSnackbar();\n  const [client, setClient] = useState();\n  const [settings] = useSettings();\n\n  useEffect(() => {\n    read(id)\n      .then((doc) => {\n        // console.log(doc);\n        setClient(fromObject(doc));\n      })\n      .catch((e) => {\n        console.error(e);\n        enqueueSnackbar(\"Errore caricamento dati\", { variant: \"error\" });\n        setTimeout(replace, 5000, \"/notfound\");\n      });\n    // eslint-disable-next-line\n  }, [id]);\n\n  if (!client) {\n    return <Loading />;\n  }\n\n  const { _id, contacts, createdAt, updatedAt, name, surname, price } = client;\n\n  return (\n    <Page\n      header={\n        <Header\n          leftAction={<BackIconButton />}\n          rightAction={[\n            <Push key=\"edit\" href={`/client/edit/${_id}`} state={client}>\n              <IconButton>\n                <EditIcon />\n              </IconButton>\n            </Push>,\n            <Push key=\"play\" href=\"/tracker\" state={{ client }}>\n              <IconButton disabled={!client}>\n                <StartIcon />\n              </IconButton>\n            </Push>,\n          ]}\n        >\n          {name || surname ? `${name} ${surname}` : \"Scheda cliente\"}\n        </Header>\n      }\n      content={\n        <Content>\n          <List>\n            <ListItem>\n              <ListItemText primary={name} secondary=\"Nome\" />\n            </ListItem>\n            <ListItem>\n              <ListItemText primary={surname} secondary=\"Cognome\" />\n            </ListItem>\n            <ListItem>\n              <ListItemText\n                primary={`${parseFloat(price).toFixed(2)} ${\n                  settings.currency\n                }/h`}\n                secondary=\"Tariffa\"\n              />\n            </ListItem>\n          </List>\n\n          <ContactList contacts={contacts} />\n\n          <List>\n            <ListItem>\n              <ListItemText\n                primary={new Date(createdAt).toLocaleString()}\n                secondary=\"Creato\"\n              />\n            </ListItem>\n            <ListItem>\n              <ListItemText\n                primary={new Date(updatedAt).toLocaleString()}\n                secondary=\"Aggiornato\"\n              />\n            </ListItem>\n          </List>\n\n          <Latest id={id} />\n        </Content>\n      }\n    />\n  );\n}\n\nexport const route = {\n  path: \"/client/view/:id\",\n  exact: true,\n  component: Component,\n};\n","import { Switch, Redirect, Route } from \"react-router-dom\";\nimport { useTranslation } from \"react-i18next\";\n\nimport { route as Create } from \"./client/create\";\nimport { route as Edit } from \"./client/edit\";\nimport { route as List } from \"./client/list\";\nimport { route as View } from \"./client/view\";\n\nimport { useTitle } from \"./utils\";\n\nimport DrawerIcon from \"@material-ui/icons/Person\";\n\nfunction Component() {\n  const { t } = useTranslation();\n  useTitle(t(\"Client.Key_plural\"));\n\n  return (\n    <Switch>\n      <Route {...Create} />\n      <Route {...Edit} />\n      <Route {...List} />\n      <Route {...View} />\n      <Redirect to=\"/notfound\" />\n    </Switch>\n  );\n}\n\nexport const route = {\n  path: \"/client\",\n  component: Component,\n};\n\nexport const drawer = {\n  key: \"client\",\n  primary: \"Client.Key_plural\",\n  secondary: \"\",\n  icon: <DrawerIcon />,\n  title: \"$t(Open) $t(Client.Key_plural)\",\n};\n","import ReactDurationPicker from \"react-duration-picker\";\nimport \"./DurationPicker.css\";\n\nexport default function DurationPicker(props) {\n  // https://github.com/flurmbo/react-duration-picker#api\n  return <ReactDurationPicker {...props} />;\n}\n","import {\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogTitle,\n} from \"@material-ui/core\";\nimport DurationPicker from \"./DurationPicker\";\n\nexport default function DurationPickerDialog({\n  children,\n  title = \"\",\n  PickerProps = {},\n  ...rest\n}) {\n  return (\n    <Dialog {...rest}>\n      <DialogTitle>{title}</DialogTitle>\n      <DialogContent>\n        <DurationPicker {...PickerProps} />\n      </DialogContent>\n      <DialogActions>{children}</DialogActions>\n    </Dialog>\n  );\n}\n","import { Fragment, useCallback, useEffect, useMemo, useState } from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport DurationPickerDialog from \"../../components/DurationPickerDialog\";\nimport {\n  Button,\n  TextField,\n  IconButton,\n  InputAdornment,\n} from \"@material-ui/core\";\n\nimport TimerIcon from \"@material-ui/icons/Timer\";\n\nexport default function DurationField({ value, onChange = () => {}, ...rest }) {\n  const actual = useMemo(() => {\n    const seconds = Math.floor(value / 1000) % 60;\n    const minutes = Math.floor(value / 60000) % 60;\n    const hours = Math.floor(value / 3600000);\n    return { seconds, minutes, hours };\n  }, [value]);\n\n  const [open, setOpen] = useState(false);\n  const [duration, setDuration] = useState(actual);\n  const [fieldValue, setFieldValue] = useState(\"\");\n\n  useEffect(() => {\n    const { hours, minutes, seconds } = actual;\n    const h = String(hours).padStart(2, \"0\");\n    const m = String(minutes).padStart(2, \"0\");\n    const s = String(seconds).padStart(2, \"0\");\n    setFieldValue(`${h}:${m}:${s}`);\n  }, [actual]);\n\n  const { t } = useTranslation();\n\n  const handleConfirm = useCallback(() => {\n    const { hours, minutes, seconds } = duration;\n    onChange(1000 * (hours * 3600 + minutes * 60 + seconds));\n    setOpen(false);\n    // eslint-disable-next-line\n  }, [duration]);\n\n  useEffect(() => {\n    setDuration(actual);\n  }, [actual]);\n\n  const handleChange = useCallback(({ target: { value } }) => {\n    setFieldValue(value);\n    const [hours, minutes, seconds] = value.split(\":\");\n    if (hours && minutes && seconds) {\n      onChange(\n        1000 *\n          (parseInt(hours.substr(0, 2)) * 3600 +\n            parseInt(minutes.substr(0, 2)) * 60 +\n            parseInt(seconds.substr(0, 2)))\n      );\n    }\n    // eslint-disable-next-line\n  }, []);\n\n  return (\n    <Fragment>\n      <TextField\n        value={fieldValue}\n        onChange={handleChange}\n        InputProps={{\n          endAdornment: (\n            <InputAdornment position=\"end\">\n              <IconButton onClick={() => setOpen(true)}>\n                <TimerIcon />\n              </IconButton>\n            </InputAdornment>\n          ),\n        }}\n        {...rest}\n      />\n      <DurationPickerDialog\n        open={open}\n        onClose={() => setOpen(false)}\n        PickerProps={{\n          onChange: (length) => setDuration(length),\n          initialDuration: actual,\n        }}\n      >\n        <Button onClick={handleConfirm}>{t(\"Ok\")}</Button>\n        <Button onClick={() => setOpen(false)}>{t(\"Cancel\")}</Button>\n      </DurationPickerDialog>\n    </Fragment>\n  );\n}\n","import { Fragment, useEffect, useState } from \"react\";\nimport { useTranslation } from \"react-i18next\";\n\nimport {\n  Dialog,\n  DialogActions,\n  DialogTitle,\n  DialogContent,\n  // DialogContentText,\n  IconButton,\n  InputAdornment,\n  List,\n  ListItem,\n  TextField,\n} from \"@material-ui/core\";\nimport { KeyboardDatePicker, KeyboardTimePicker } from \"@material-ui/pickers\";\nimport { DangerButton } from \"mastro-elfo-mui\";\n\nimport DurationField from \"./DurationField\";\nimport { delta2hms, timeDiff } from \"../tracker/utils\";\n\nimport ClockIcon from \"@material-ui/icons/AccessTime\";\nimport EditIcon from \"@material-ui/icons/Edit\";\n\nexport default function PauseEdit({ pause: _pause, onChange, onDelete }) {\n  const [open, setOpen] = useState(false);\n  const [pause, setPause] = useState(_pause);\n  const { t } = useTranslation();\n\n  useEffect(() => {\n    const to = setTimeout(onChange, 250, pause);\n    return () => clearTimeout(to);\n    // eslint-disable-next-line\n  }, [pause]);\n\n  const { note, start, end } = pause;\n\n  const length = timeDiff(start, end);\n\n  const handleChange = (field) => ({ target: { value } }) => {\n    const newPause = { ...pause, [field]: value };\n    setPause(newPause);\n  };\n\n  // const handleChangeValue = (field) => (value) =>\n  //   setPause({ ...pause, [field]: value });\n\n  const handleChangeStart = (value) =>\n    setPause({\n      ...pause,\n      start: value,\n      end: new Date(+new Date(end) + (new Date(value) - new Date(start))),\n    });\n\n  const handleChangeLength = (value) =>\n    setPause({\n      ...pause,\n      end: new Date(+new Date(end) + (value - length)),\n    });\n\n  const handleDelete = () => {\n    onDelete();\n    setOpen(false);\n  };\n\n  return (\n    <Fragment>\n      <ListItem>\n        <TextField\n          fullWidth\n          label={delta2hms(length)}\n          value={note}\n          onChange={handleChange(\"note\")}\n          InputProps={{\n            endAdornment: (\n              <InputAdornment>\n                <IconButton onClick={() => setOpen(true)}>\n                  <EditIcon />\n                </IconButton>\n              </InputAdornment>\n            ),\n          }}\n        />\n      </ListItem>\n      <Dialog open={open} onClose={() => setOpen(false)}>\n        <DialogTitle>Modifica pausa</DialogTitle>\n        <DialogContent>\n          <List>\n            <ListItem>\n              <KeyboardDatePicker\n                fullWidth\n                label={t(\"Performance.StartDate\")}\n                value={start}\n                onChange={handleChangeStart}\n                format=\"dd/MM/yyyy\"\n              />\n            </ListItem>\n            <ListItem>\n              <KeyboardTimePicker\n                fullWidth\n                ampm={false}\n                label={t(\"Performance.StartHour\")}\n                value={start}\n                onChange={handleChangeStart}\n                views={[\"hours\", \"minutes\", \"seconds\"]}\n                keyboardIcon={<ClockIcon />}\n                format=\"HH:mm:ss\"\n              />\n            </ListItem>\n            <ListItem>\n              <DurationField\n                fullWidth\n                label={t(\"Performance.Length\")}\n                value={length}\n                onChange={handleChangeLength}\n              />\n            </ListItem>\n          </List>\n        </DialogContent>\n        <DialogActions>\n          <DangerButton onClick={handleDelete}>{t(\"Delete\")}</DangerButton>\n        </DialogActions>\n      </Dialog>\n    </Fragment>\n  );\n}\n","import { merge } from \"./utils\";\n\nconst defaultValue = {\n  id: null,\n  start: null,\n  end: null,\n  note: \"\",\n};\n\nexport function fromObject(...data) {\n  const start = new Date();\n  return merge(\n    defaultValue,\n    {\n      id: +start,\n      start,\n      end: start,\n    },\n    ...data\n  );\n}\n","import { useEffect, useState } from \"react\";\n\nimport {\n  List,\n  ListItem,\n  ListItemIcon,\n  ListSubheader,\n  ListItemText,\n} from \"@material-ui/core\";\n\nimport PauseEdit from \"./PauseEdit\";\nimport { fromObject as pauseFromObject } from \"../../controllers/pause\";\n\nimport AddIcon from \"@material-ui/icons/Add\";\n\nexport default function PauseEditList({ pauses: _pauses, onChange }) {\n  const [pauses, setPauses] = useState(_pauses);\n\n  useEffect(() => {\n    const to = setTimeout(onChange, 250, pauses);\n    return () => clearTimeout(to);\n    // eslint-disable-next-line\n  }, [pauses]);\n\n  const handleAddPause = () => setPauses([pauseFromObject(), ...pauses]);\n\n  const handleChange = (index) => (pause) => {\n    const _pauses = pauses.slice();\n    _pauses[index] = pause;\n    setPauses(_pauses);\n  };\n\n  const handleDelete = (index) => () => {\n    const _pauses = pauses.slice();\n    _pauses.splice(index, 1);\n    setPauses(_pauses);\n  };\n\n  return (\n    <List subheader={<ListSubheader>Pause</ListSubheader>}>\n      <ListItem button onClick={handleAddPause}>\n        <ListItemIcon>\n          <AddIcon />\n        </ListItemIcon>\n        <ListItemText primary=\"Aggiungi\" />\n      </ListItem>\n      {pauses.map(({ id, ...pause }, i) => (\n        <PauseEdit\n          key={id}\n          pause={{ id, ...pause }}\n          onChange={handleChange(i)}\n          onDelete={handleDelete(i)}\n        />\n      ))}\n    </List>\n  );\n}\n","import { Fragment, useEffect, useState } from \"react\";\n\nimport {\n  Dialog,\n  DialogActions,\n  DialogTitle,\n  DialogContent,\n  // DialogContentText,\n  IconButton,\n  InputAdornment,\n  List,\n  ListItem,\n  TextField,\n} from \"@material-ui/core\";\nimport { KeyboardDateTimePicker } from \"@material-ui/pickers\";\nimport { DangerButton } from \"mastro-elfo-mui\";\n\nimport { useSettings } from \"../settings/context\";\n\nimport EditIcon from \"@material-ui/icons/Edit\";\n\nexport default function PaymentEdit({ payment: _payment, onChange, onDelete }) {\n  const [settings] = useSettings();\n  const [open, setOpen] = useState(false);\n  const [payment, setPayment] = useState(_payment);\n\n  useEffect(() => {\n    const to = setTimeout(onChange, 250, payment);\n    return () => clearTimeout(to);\n    // eslint-disable-next-line\n  }, [payment]);\n\n  const { date, value } = payment;\n\n  const handleChange = (field, cast = (v) => v) => ({ target: { value } }) => {\n    setPayment({ ...payment, [field]: cast(value) });\n  };\n\n  const handleChangeValue = (field) => (value) => {\n    setPayment({ ...payment, [field]: value });\n  };\n\n  const handleDelete = () => {\n    onDelete();\n    setOpen(false);\n  };\n\n  return (\n    <Fragment>\n      <ListItem>\n        <TextField\n          fullWidth\n          type=\"number\"\n          label={new Date(date).toLocaleString()}\n          value={parseFloat(value).toFixed(2)}\n          onChange={handleChange(\"value\", parseFloat)}\n          InputProps={{\n            startAdornment: (\n              <InputAdornment position=\"start\">\n                {settings.currency}\n              </InputAdornment>\n            ),\n            endAdornment: (\n              <InputAdornment position=\"end\">\n                <IconButton onClick={() => setOpen(true)}>\n                  <EditIcon />\n                </IconButton>\n              </InputAdornment>\n            ),\n          }}\n        />\n      </ListItem>\n      <Dialog open={open} onClose={() => setOpen(false)}>\n        <DialogTitle>Modifica pagamento</DialogTitle>\n        <DialogContent>\n          <List>\n            <ListItem>\n              <KeyboardDateTimePicker\n                fullWidth\n                ampm={false}\n                label=\"Data e Ora\"\n                value={date}\n                onChange={handleChangeValue(\"date\")}\n                format=\"dd/MM/yyyy HH:mm\"\n              />\n            </ListItem>\n          </List>\n        </DialogContent>\n        <DialogActions>\n          <DangerButton onClick={handleDelete}>Elimina</DangerButton>\n        </DialogActions>\n      </Dialog>\n    </Fragment>\n  );\n}\n","import { merge } from \"./utils\";\n\nconst defaultValue = {\n  id: null,\n  date: null,\n  value: 0,\n};\n\nexport function fromObject(...data) {\n  const date = new Date();\n  return merge(\n    defaultValue,\n    {\n      id: date,\n      date,\n    },\n    ...data\n  );\n}\n","import { useEffect, useState } from \"react\";\n\nimport {\n  List,\n  ListItem,\n  ListItemIcon,\n  ListSubheader,\n  ListItemText,\n} from \"@material-ui/core\";\n\nimport PaymentEdit from \"./PaymentEdit\";\nimport { fromObject as paymentFromObject } from \"../../controllers/payment\";\n\nimport AddIcon from \"@material-ui/icons/Add\";\n\nexport default function PaymentEditList({\n  due,\n  payments: _payments,\n  onChange,\n}) {\n  const [payments, setPayments] = useState(_payments);\n\n  useEffect(() => {\n    if (_payments.length > payments.length) {\n      // A payment is added from outside\n      setPayments(_payments);\n    }\n    // eslint-disable-next-line\n  }, [_payments]);\n\n  useEffect(() => {\n    const to = setTimeout(onChange, 250, payments);\n    return () => clearTimeout(to);\n    // eslint-disable-next-line\n  }, [payments]);\n\n  const handleAddPayment = () =>\n    setPayments([paymentFromObject({ value: due }), ...payments]);\n\n  const handleChange = (index) => (payment) => {\n    const _payments = payments.slice();\n    _payments[index] = payment;\n    setPayments(_payments);\n  };\n\n  const handleDelete = (index) => () => {\n    const _payments = payments.slice();\n    _payments.splice(index, 1);\n    setPayments(_payments);\n  };\n\n  return (\n    <List subheader={<ListSubheader>Pagamenti</ListSubheader>}>\n      <ListItem button onClick={handleAddPayment}>\n        <ListItemIcon>\n          <AddIcon />\n        </ListItemIcon>\n        <ListItemText primary=\"Aggiungi\" />\n      </ListItem>\n      {payments.map(({ id, ...payment }, i) => (\n        <PaymentEdit\n          key={id}\n          payment={{ id, ...payment }}\n          onChange={handleChange(i)}\n          onDelete={handleDelete(i)}\n        />\n      ))}\n    </List>\n  );\n}\n","export function closeTo(actual, expected, precision = 2) {\n  return Math.abs(expected - actual) < Math.pow(10, -precision) / 2;\n}\n","import { useState } from \"react\";\nimport { useHistory, useParams } from \"react-router-dom\";\nimport { useSnackbar } from \"notistack\";\nimport { useTranslation } from \"react-i18next\";\n\nimport {\n  IconButton,\n  InputAdornment,\n  List,\n  ListItem,\n  // ListItemIcon,\n  ListItemSecondaryAction,\n  ListItemText,\n  TextField,\n} from \"@material-ui/core\";\nimport { KeyboardDatePicker, KeyboardTimePicker } from \"@material-ui/pickers\";\nimport {\n  BackIconButton,\n  ConfirmDialogButton,\n  Content,\n  DangerButton,\n  Header,\n  Page,\n} from \"mastro-elfo-mui\";\n\nimport DurationField from \"./DurationField\";\nimport PauseEditList from \"./PauseEditList\";\nimport PaymentEditList from \"./PaymentEditList\";\nimport { read as read_client } from \"../../controllers/client\";\nimport { update, destroy } from \"../../controllers/performance\";\nimport { roundCost, timeDiff } from \"../tracker/utils\";\nimport { useSettings } from \"../settings/context\";\nimport { closeTo } from \"./utils\";\n\nimport ClockIcon from \"@material-ui/icons/AccessTime\";\nimport FillIcon from \"@material-ui/icons/AddCircle\";\nimport ReloadIcon from \"@material-ui/icons/Autorenew\";\nimport SaveIcon from \"@material-ui/icons/Save\";\n// import TimerIcon from \"@material-ui/icons/Timer\";\n\nfunction Component() {\n  const { t } = useTranslation();\n  const [settings] = useSettings();\n  const { go, goBack, location } = useHistory();\n  const { id } = useParams();\n  const { enqueueSnackbar } = useSnackbar();\n  const [performance, setPerformance] = useState(location.state);\n\n  const {\n    start,\n    end,\n    price,\n    discount,\n    pauses,\n    note,\n    payments,\n    client,\n  } = performance;\n\n  const { name, surname } = client;\n\n  const length = timeDiff(start, end, pauses);\n  const cost = (length / 1000 / 3600) * price;\n  const total = cost - discount;\n  const balance = payments.reduce(\n    (acc, { value }) => acc + parseFloat(value),\n    0\n  );\n  const due = total - balance;\n  const payed = closeTo(due, 0);\n\n  const handleSave = () => {\n    // Check client\n    // Check price\n    if (isNaN(price) || price < 0) {\n      return enqueueSnackbar(t(\"Performance.Snackbar.InvalidPrice\"), {\n        variant: \"warning\",\n      });\n    }\n    update(id, { ...performance, payed })\n      .then((r) => {\n        // console.log(r);\n        enqueueSnackbar(t(\"Performance.Snackbar.ChangesSaved\"), {\n          variant: \"success\",\n        });\n        setTimeout(goBack, 500);\n      })\n      .catch((e) => {\n        console.error(e);\n        enqueueSnackbar(`${e.name} ${e.message}`, { variant: \"error\" });\n      });\n  };\n\n  const handleDelete = () => {\n    destroy(id)\n      .then((r) => {\n        // console.log(r);\n        enqueueSnackbar(t(\"Performance.Snackbar.PerformanceDeleted\"), {\n          variant: \"success\",\n        });\n        setTimeout(go, 500, -2);\n      })\n      .catch((e) => {\n        console.error(e);\n        enqueueSnackbar(`${e.name} ${e.message}`, { variant: \"error\" });\n      });\n  };\n\n  const handleChange = (field, cast = (v) => v) => ({ target: { value } }) =>\n    setPerformance({ ...performance, [field]: cast(value) });\n\n  const handleChangeValue = (field, cast = (v) => v) => (value) =>\n    setPerformance({ ...performance, [field]: cast(value) });\n\n  // Changing the start means also changing the end to keep the length constant\n  const handleChangeStart = (value) =>\n    setPerformance({\n      ...performance,\n      start: value,\n      end: new Date(+new Date(end) + (new Date(value) - new Date(start))),\n    });\n\n  // Changing the length means changing the end value\n  const handleChangeLength = (value) =>\n    setPerformance({\n      ...performance,\n      end: new Date(+new Date(end) + (value - length)),\n    });\n\n  const handleAddPayment = () => {\n    const date = new Date();\n    setPerformance({\n      ...performance,\n      payments: [{ id: date, date, value: due }, ...performance.payments],\n    });\n  };\n\n  const handleReloadClient = () =>\n    read_client(client._id)\n      .then((client) => {\n        setPerformance({ ...performance, client });\n      })\n      .catch((e) => {\n        console.error(e);\n        enqueueSnackbar(`${e.name} ${e.message}`, { variant: \"error\" });\n      });\n\n  return (\n    <Page\n      header={\n        <Header\n          leftAction={<BackIconButton />}\n          rightAction={\n            <IconButton onClick={handleSave}>\n              <SaveIcon />\n            </IconButton>\n          }\n        >\n          Modifica\n        </Header>\n      }\n      content={\n        <Content>\n          <List>\n            <ListItem>\n              <ListItemText\n                primary={`${name} ${surname}`}\n                secondary={t(\"Client.Key\")}\n              />{\" \"}\n              <ListItemSecondaryAction>\n                <IconButton onClick={handleReloadClient}>\n                  <ReloadIcon />\n                </IconButton>\n              </ListItemSecondaryAction>\n            </ListItem>\n            <ListItem>\n              <ListItemText\n                primary={`${balance.toFixed(2)} ${settings.currency}`}\n                secondary={t(\"Performance.Balance\")}\n              />\n              <ListItemSecondaryAction>\n                <IconButton onClick={handleAddPayment} disabled={payed}>\n                  <FillIcon />\n                </IconButton>\n              </ListItemSecondaryAction>\n            </ListItem>\n            <ListItem>\n              <KeyboardDatePicker\n                fullWidth\n                label={t(\"Performance.StartDate\")}\n                value={start}\n                onChange={handleChangeStart}\n                format=\"dd/MM/yyyy\"\n              />\n              <KeyboardTimePicker\n                fullWidth\n                ampm={false}\n                label={t(\"Performance.StartHour\")}\n                value={start}\n                onChange={handleChangeStart}\n                views={[\"hours\", \"minutes\", \"seconds\"]}\n                keyboardIcon={<ClockIcon />}\n                format=\"HH:mm:ss\"\n              />\n            </ListItem>\n            <ListItem>\n              <DurationField\n                fullWidth\n                label={t(\"Performance.Length\")}\n                value={length}\n                onChange={handleChangeLength}\n              />\n            </ListItem>\n            <ListItem>\n              <TextField\n                fullWidth\n                label={t(\"Performance.Price\")}\n                type=\"number\"\n                value={parseFloat(price || 0).toFixed(2)}\n                onChange={handleChange(\"price\", parseFloat)}\n                InputProps={{\n                  startAdornment: (\n                    <InputAdornment position=\"start\">\n                      {settings.currency}/h\n                    </InputAdornment>\n                  ),\n                }}\n                inputProps={{ min: 0 }}\n              />\n            </ListItem>\n            <ListItem>\n              <ListItemText\n                primary={`${parseFloat(cost || 0).toFixed(2)} ${\n                  settings.currency\n                }`}\n                secondary={t(\"Performance.Cost\")}\n              />\n            </ListItem>\n            <ListItem>\n              <TextField\n                fullWidth\n                label={t(\"Performance.Discount\")}\n                type=\"number\"\n                value={parseFloat(discount || 0).toFixed(2)}\n                onChange={handleChange(\"discount\", parseFloat)}\n                InputProps={{\n                  startAdornment: (\n                    <InputAdornment position=\"start\">\n                      {settings.currency}\n                    </InputAdornment>\n                  ),\n                  endAdornment: (\n                    <InputAdornment position=\"end\">\n                      <IconButton\n                        onClick={handleChange(\"discount\", () =>\n                          roundCost(cost, settings.discountRound)\n                        )}\n                      >\n                        <ReloadIcon />\n                      </IconButton>\n                    </InputAdornment>\n                  ),\n                }}\n                inputProps={{ min: 0 }}\n              />\n            </ListItem>\n            <ListItem>\n              <ListItemText\n                primary={`${parseFloat(total || 0).toFixed(2)} ${\n                  settings.currency\n                }`}\n                secondary={t(\"Performance.Total\")}\n              />\n            </ListItem>\n            <ListItem>\n              <TextField\n                fullWidth\n                multiline\n                variant=\"outlined\"\n                label={t(\"Performance.Notes\")}\n                rows={2}\n                rowsMax={4}\n                value={note}\n                onChange={handleChange(\"note\")}\n              />\n            </ListItem>\n          </List>\n\n          <PauseEditList\n            pauses={pauses}\n            onChange={handleChangeValue(\"pauses\")}\n          />\n\n          <PaymentEditList\n            due={due}\n            payments={payments}\n            onChange={handleChangeValue(\"payments\")}\n          />\n\n          <List>\n            <ListItem>\n              <ConfirmDialogButton\n                variant=\"contained\"\n                Component={DangerButton}\n                onConfirm={handleDelete}\n                DialogProps={{\n                  title: t(\"Performance.Delete\"),\n                  content: t(\"Performance.Confirm delete performance\"),\n                  confirm: t(\"Delete\"),\n                  cancel: t(\"Cancel\"),\n                }}\n              >\n                {t(\"Delete\")}\n              </ConfirmDialogButton>\n            </ListItem>\n          </List>\n        </Content>\n      }\n    />\n  );\n}\n\nexport const route = {\n  path: \"/performance/edit/:id\",\n  exact: true,\n  component: Component,\n};\n","import {\n  Grid,\n  List,\n  ListItem,\n  ListItemIcon,\n  ListItemSecondaryAction,\n  ListItemText,\n  Typography,\n} from \"@material-ui/core\";\nimport Skeleton from \"@material-ui/lab/Skeleton\";\nimport { For } from \"mastro-elfo-mui\";\nimport Loading from \"../loading\";\n\nexport default function Loader() {\n  return (\n    <Loading>\n      <List>\n        <For\n          each={Array(10).fill(true)}\n          Component={() => (\n            <ListItem>\n              <ListItemIcon>\n                <Skeleton variant=\"circle\" width={20} heigth={20} />\n              </ListItemIcon>\n              <ListItemText\n                primary={\n                  <Grid container>\n                    <Grid item xs={12} sm={4}>\n                      <Typography variant=\"h6\">\n                        <Skeleton width=\"75%\" />\n                      </Typography>\n                    </Grid>\n                    <Grid item xs={6} sm={4}>\n                      <ListItemText\n                        primary={<Skeleton width=\"75%\" />}\n                        secondary={<Skeleton width=\"65%\" />}\n                      />\n                    </Grid>\n                    <Grid item xs={6} sm={4}>\n                      <ListItemText\n                        primary={<Skeleton width=\"75%\" />}\n                        secondary={<Skeleton width=\"65%\" />}\n                      />\n                    </Grid>\n                  </Grid>\n                }\n                secondary={<Skeleton />}\n              />\n              <ListItemSecondaryAction>\n                <Skeleton variant=\"circle\" width={20} heigth={20} />\n              </ListItemSecondaryAction>\n            </ListItem>\n          )}\n        />\n      </List>\n    </Loading>\n  );\n}\n","import { useMemo, useState } from \"react\";\nimport { useSnackbar } from \"notistack\";\nimport {\n  // Box,\n  // Checkbox,\n  // Grid,\n  IconButton,\n  // InputAdornment,\n  // List,\n  ListItem,\n  // ListItemIcon,\n  ListItemText,\n  // Typography,\n  // TextField,\n} from \"@material-ui/core\";\n\nimport { ConfirmDialogButton } from \"mastro-elfo-mui\";\n\nimport { closeTo } from \"./utils\";\nimport { useSettings } from \"../settings/context\";\nimport {\n  derived,\n  fromObject as performanceFromObject,\n  update,\n} from \"../../controllers/performance\";\nimport { fromObject as paymentFromObject } from \"../../controllers/payment\";\n\nimport MonetizationOnIcon from \"@material-ui/icons/MonetizationOn\";\n\nexport default function PayDialogButton({ selected, onUpdate }) {\n  const { enqueueSnackbar } = useSnackbar();\n  const [settings] = useSettings();\n  const [open, setOpen] = useState(false);\n\n  const total = useMemo(\n    () =>\n      selected.map((item) => derived(item)).reduce((a, { due }) => a + due, 0),\n    [selected]\n  );\n\n  const handleConfirm = () => {\n    Promise.all(\n      selected\n        .map((item) => {\n          const { due } = derived(item);\n          if (closeTo(due, 0)) {\n            return null;\n          }\n          const newItem = performanceFromObject(item, {\n            payed: true,\n            payments: [...item.payments, paymentFromObject({ value: due })],\n          });\n          return newItem;\n        })\n        .filter((item) => !!item)\n        .map((item) => update(item._id, item))\n    )\n      .then(() => {\n        enqueueSnackbar(\"Pagamenti effettuati\", { variant: \"success\" });\n        onUpdate();\n      })\n      .catch((e) => {\n        console.error(e);\n        enqueueSnackbar(`${e.name} ${e.message}`, { variant: \"error\" });\n      });\n  };\n\n  return (\n    <ConfirmDialogButton\n      Component={IconButton}\n      open={open}\n      onClose={() => setOpen(false)}\n      onCancel={() => setOpen(false)}\n      onConfirm={handleConfirm}\n      disabled={selected.length === 0}\n      DialogProps={{\n        title: \"Conferma il pagamento\",\n        confirm: \"Conferma\",\n        cancel: \"Annulla\",\n        content: [\n          <ListItem key=\"first\">\n            <ListItemText\n              primary={`${total.toFixed(2)}${settings.currency}`}\n              secondary=\"Totale\"\n            />\n          </ListItem>,\n          ...selected.map((item) => {\n            const { due } = derived(item);\n            return (\n              <ListItem key={item._id}>\n                <ListItemText\n                  primary={`${item.client.name} ${item.client.surname}`}\n                  secondary={`${new Date(item.start).toLocaleString()} ${\n                    item.note\n                  }`}\n                />\n                <ListItemText\n                  primary={`${due.toFixed(2)}${settings.currency}`}\n                />\n              </ListItem>\n            );\n          }),\n        ],\n      }}\n    >\n      <MonetizationOnIcon />\n    </ConfirmDialogButton>\n  );\n}\n","import {\n  Checkbox,\n  Grid,\n  ListItem,\n  ListItemIcon,\n  ListItemSecondaryAction,\n  ListItemText,\n  Typography,\n} from \"@material-ui/core\";\nimport { useTranslation } from \"react-i18next\";\n\nimport { useSettings } from \"../settings/context\";\nimport { delta2hms, timeDiff } from \"../tracker/utils\";\n\nimport CheckIcon from \"@material-ui/icons/CheckCircle\";\n\nexport default function PerformanceListItem({\n  checked,\n  onClick,\n  onToggle,\n  performance,\n}) {\n  const { t } = useTranslation();\n\n  const [settings] = useSettings();\n  const {\n    client: { name, surname },\n    discount,\n    end,\n    note,\n    pauses,\n    payed,\n    payments,\n    price,\n    start,\n  } = performance;\n\n  const length = timeDiff(start, end, pauses);\n  const cost = (length / 1000 / 3600) * price;\n  const total = cost - discount;\n  const balance = payments.reduce((acc, { value }) => acc + value, 0);\n  const due = total - balance;\n\n  return (\n    <ListItem button onClick={onClick}>\n      <ListItemIcon>\n        {!!payed ? <CheckIcon color=\"secondary\" /> : <span />}\n      </ListItemIcon>\n      <ListItemText\n        primary={\n          <Grid container>\n            <Grid item xs={12} sm={3}>\n              <Typography variant=\"h6\">\n                {name} {surname}\n              </Typography>\n            </Grid>\n            <Grid item xs={4} sm={3}>\n              <ListItemText\n                primary={new Date(start).toLocaleString()}\n                secondary={t(\"Date\")}\n              />\n            </Grid>\n            <Grid item xs={4} sm={3}>\n              <ListItemText\n                primary={delta2hms(timeDiff(start, end, pauses))}\n                secondary={t(\"Duration\")}\n              />\n            </Grid>\n            <Grid item xs={4} sm={3}>\n              <ListItemText\n                primary={`${parseFloat(due).toFixed(2)} ${settings.currency}`}\n                secondary={t(\"Due\")}\n              />\n            </Grid>\n          </Grid>\n        }\n        secondary={note}\n      />\n      <ListItemSecondaryAction>\n        <Checkbox checked={checked} onChange={onToggle} />\n      </ListItemSecondaryAction>\n    </ListItem>\n  );\n}\n","import { useState } from \"react\";\n\nimport { Checkbox, FormControlLabel, TextField } from \"@material-ui/core\";\nimport { ConfirmDialogButton } from \"mastro-elfo-mui\";\nimport { useTranslation } from \"react-i18next\";\n\nimport { useSettings } from \"../settings/context\";\n\nimport PrintIcon from \"@material-ui/icons/Print\";\n\nexport default function PrintModal({ onPrint = () => {}, ...rest }) {\n  const [settings] = useSettings();\n  const { t } = useTranslation();\n  const [printTitle, setPrintTitle] = useState(settings.printTitle);\n  const [printBefore, setPrintBefore] = useState(settings.printBefore);\n  const [printAfter, setPrintAfter] = useState(settings.printAfter);\n  const [printNote, setPrintNote] = useState(settings.printNote);\n\n  const handleOpen = () => {\n    setPrintTitle(settings.printTitle);\n    setPrintBefore(settings.printBefore);\n    setPrintAfter(settings.printAfter);\n  };\n\n  const handlePrint = () => {\n    setTimeout(onPrint, 225, {\n      printTitle,\n      printBefore,\n      printAfter,\n      printNote,\n    });\n  };\n\n  return (\n    <ConfirmDialogButton\n      isIcon\n      DialogProps={{\n        title: t(\"Performance.PrintModal.Print document\"),\n        confirm: t(\"Print\"),\n        cancel: t(\"Cancel\"),\n        content: (\n          <>\n            <TextField\n              key=\"title\"\n              fullWidth\n              label={t(\"Performance.PrintModal.Title\")}\n              value={printTitle}\n              onChange={({ target: { value } }) => setPrintTitle(value)}\n            />\n            <TextField\n              key=\"before\"\n              fullWidth\n              multiline\n              rows={2}\n              rowsMax={4}\n              label={t(\"Performance.PrintModal.Before\")}\n              value={printBefore}\n              onChange={({ target: { value } }) => setPrintBefore(value)}\n            />\n            <TextField\n              key=\"after\"\n              fullWidth\n              multiline\n              rows={2}\n              rowsMax={4}\n              label={t(\"Performance.PrintModal.After\")}\n              value={printAfter}\n              onChange={({ target: { value } }) => setPrintAfter(value)}\n            />\n            <FormControlLabel\n              control={\n                <Checkbox\n                  checked={printNote}\n                  onChange={() => setPrintNote(!printNote)}\n                />\n              }\n              label={t(\"Performance.PrintModal.Note\")}\n            />\n          </>\n        ),\n      }}\n      onConfirm={handlePrint}\n      onOpen={handleOpen}\n      {...rest}\n    >\n      <PrintIcon />\n    </ConfirmDialogButton>\n  );\n}\n","import { Fragment } from \"react\";\n\nimport { withStyles } from \"@material-ui/core/styles\";\n\nimport {\n  Table,\n  TableBody,\n  TableCell,\n  TableContainer,\n  TableFooter,\n  TableHead,\n  TableRow,\n  Typography,\n} from \"@material-ui/core\";\n\nimport { TableHeadCell } from \"mastro-elfo-mui\";\n\nimport { useSettings } from \"../settings/context\";\nimport { delta2hms, timeDiff } from \"../tracker/utils\";\n\nimport CheckIcon from \"@material-ui/icons/CheckCircle\";\n\nexport default function PrintTable({\n  list = [],\n  printTitle = \"\",\n  printBefore = \"\",\n  printAfter = \"\",\n  printNote = false,\n}) {\n  // console.log(list);\n  const [settings] = useSettings();\n  // const { printTitle, printBefore, printAfter } = settings;\n\n  const cost = list\n    .map(\n      ({ start, end, pauses, price }) =>\n        (timeDiff(start, end, pauses) / 1000 / 3600) * price\n    )\n    .reduce((acc, cur) => acc + cur, 0);\n  const discount = list\n    .map(({ discount }) => discount)\n    .reduce((acc, cur) => acc + cur, 0);\n  const total = cost - discount;\n  const balance = list\n    .map(({ payments }) => payments.reduce((acc, { value }) => acc + value, 0))\n    .reduce((cur, acc) => cur + acc, 0);\n  const due = total - balance;\n  const payed = list.every(({ payed }) => !!payed);\n\n  return (\n    <Fragment>\n      {!!printTitle && (\n        <Typography variant=\"h4\" gutterBottom>\n          {printTitle}\n        </Typography>\n      )}\n      {!!printBefore &&\n        printBefore.split(\"\\n\").map((p, i) => (\n          <Typography key={i} variant=\"body2\">\n            {p}\n          </Typography>\n        ))}\n      {!!printBefore && <Typography variant=\"body2\" gutterBottom></Typography>}\n      <TableContainer>\n        <Table>\n          <TableHead>\n            <TableRow>\n              <TableHeadCell>Data e Ora</TableHeadCell>\n              <TableHeadCell>Durata</TableHeadCell>\n              <TableHeadCell>Prezzo {settings.currency}/h</TableHeadCell>\n              <TableHeadCell>Costo {settings.currency}</TableHeadCell>\n              <TableHeadCell>Sconto {settings.currency}</TableHeadCell>\n              <TableHeadCell>Tot. {settings.currency}</TableHeadCell>\n            </TableRow>\n          </TableHead>\n          <TableFooter></TableFooter>\n          <TableBody>\n            {list.map(({ _id, ...rest }) => (\n              <PrintTableRow key={_id} printNote={printNote} {...rest} />\n            ))}\n            <TableRow>\n              <Borderless colSpan={3}>\n                <Typography variant=\"button\" display=\"block\" align=\"right\">\n                  Totale\n                </Typography>\n              </Borderless>\n              <Borderless>{cost.toFixed(2)}</Borderless>\n              <Borderless>{discount.toFixed(2)}</Borderless>\n              <Borderless>{total.toFixed(2)}</Borderless>\n            </TableRow>\n            <TableRow>\n              <TableCell colSpan={5}>\n                <Typography\n                  variant=\"button\"\n                  display=\"block\"\n                  align=\"right\"\n                  color={payed ? \"default\" : \"secondary\"}\n                >\n                  {payed ? \"Pagato\" : \"Da Pagare\"}\n                </Typography>\n              </TableCell>\n              <TableCell>\n                {payed ? (\n                  <CheckIcon color=\"secondary\" />\n                ) : (\n                  <Typography color=\"secondary\" variant=\"body2\">\n                    {due.toFixed(2)}\n                  </Typography>\n                )}\n              </TableCell>\n            </TableRow>\n          </TableBody>\n        </Table>\n      </TableContainer>\n      {!!printAfter && <Typography variant=\"body2\" gutterBottom></Typography>}\n      {!!printAfter &&\n        printAfter.split(\"\\n\").map((p, i) => (\n          <Typography key={i} variant=\"body2\">\n            {p}\n          </Typography>\n        ))}\n    </Fragment>\n  );\n}\n\nconst Borderless = withStyles({\n  root: {\n    borderBottom: \"none\",\n  },\n})(TableCell);\n\nfunction PrintTableRow({\n  client: { name, surname },\n  discount,\n  end,\n  note,\n  pauses,\n  payed,\n  payments,\n  price,\n  start,\n  printNote = false,\n}) {\n  // const [settings] = useSettings();\n\n  const length = timeDiff(start, end, pauses);\n  const cost = (length / 1000 / 3600) * price;\n  const total = cost - discount;\n  const balance = payments.reduce((acc, { value }) => acc + value, 0);\n  const due = total - balance;\n\n  return (\n    <Fragment key={start}>\n      <TableRow>\n        <Borderless>{new Date(start).toLocaleString()}</Borderless>\n        <Borderless>{delta2hms(length)}</Borderless>\n        <Borderless>{price.toFixed(2)}</Borderless>\n        <Borderless>{cost.toFixed(2)}</Borderless>\n        <Borderless>{discount.toFixed(2)}</Borderless>\n        <Borderless>{total.toFixed(2)}</Borderless>\n      </TableRow>\n      <TableRow>\n        <TableCell colSpan={3}>\n          <Typography variant=\"body2\" color=\"textSecondary\">\n            {printNote ? note : \"\"}\n          </Typography>\n        </TableCell>\n        <TableCell colSpan={2}>\n          <Typography\n            variant=\"button\"\n            display=\"block\"\n            align=\"right\"\n            color={payed ? \"default\" : \"secondary\"}\n          >\n            {payed ? \"Pagato\" : \"Da Pagare\"}\n          </Typography>\n        </TableCell>\n        <TableCell>\n          {payed ? (\n            <CheckIcon color=\"secondary\" />\n          ) : (\n            <Typography color={payed ? \"default\" : \"secondary\"} variant=\"body2\">\n              {due.toFixed(2)}\n            </Typography>\n          )}\n        </TableCell>\n      </TableRow>\n    </Fragment>\n  );\n}\n","import { useEffect, useMemo, useState } from \"react\";\nimport { useSnackbar } from \"notistack\";\nimport { useTranslation } from \"react-i18next\";\nimport {\n  Box,\n  Checkbox,\n  Grid,\n  IconButton,\n  List,\n  ListItem,\n  ListItemIcon,\n  ListItemText,\n  Paper,\n  Typography,\n} from \"@material-ui/core\";\nimport {\n  BackIconButton,\n  Content,\n  Header,\n  HeaderSearchField,\n  Page,\n  Push,\n} from \"mastro-elfo-mui\";\n\nimport { KeyboardDatePicker } from \"@material-ui/pickers\";\nimport InfiniteScroll from \"react-infinite-scroll-component\";\n\nimport Loader from \"./Loader\";\nimport PayDialogButton from \"./PayDialogButton\";\nimport PerformanceListItem from \"./PerformanceListItem\";\nimport PrintModal from \"./PrintModal\";\nimport PrintTable from \"./PrintTable\";\nimport { useSettings } from \"../settings/context\";\nimport { derived, latest, search } from \"../../controllers/performance\";\n\nimport AddIcon from \"@material-ui/icons/Add\";\nimport BlankIcon from \"@material-ui/icons/CheckBoxOutlineBlank\";\nimport CheckIcon from \"@material-ui/icons/CheckBox\";\n// import MonetizationOnIcon from \"@material-ui/icons/MonetizationOn\";\n// import PrintIcon from \"@material-ui/icons/Print\";\n\nfunction Component() {\n  const { enqueueSnackbar } = useSnackbar();\n  const [settings] = useSettings();\n  const [list, setList] = useState();\n  const [selected, setSelected] = useState([]);\n  const [searchQuery, setSearchQuery] = useState(\"\");\n  const [print, setPrint] = useState(false);\n  const [printProps, setPrintProps] = useState(settings);\n  const [fromDate, setFromDate] = useState(null);\n  const [toDate, setToDate] = useState(null);\n  const [notPayed, setNotPayed] = useState(false);\n  const [skip, setSkip] = useState(0);\n  const { t } = useTranslation();\n\n  useEffect(() => setSkip(() => 0), [searchQuery, fromDate, toDate, notPayed]);\n\n  useEffect(() => {\n    if (!searchQuery) {\n      // Load latest\n      latest({ fromDate, toDate, notPayed, skip })\n        .then((docs) => {\n          if (skip === 0) {\n            setList(docs);\n          } else {\n            setList([...list, ...docs]);\n          }\n        })\n        .catch((e) => {\n          console.error(e);\n          enqueueSnackbar(`${e.name} ${e.message}`, { variant: \"error\" });\n        });\n    }\n    // eslint-disable-next-line\n  }, [searchQuery, fromDate, toDate, notPayed, skip]);\n\n  useEffect(() => {\n    if (searchQuery) {\n      search(searchQuery, { fromDate, toDate, notPayed, skip })\n        .then((docs) => {\n          if (skip === 0) {\n            setList(docs);\n          } else {\n            setList([...list, ...docs]);\n          }\n        })\n        .catch((e) => {\n          console.error(e);\n          enqueueSnackbar(`${e.name} ${e.message}`, { variant: \"error\" });\n        });\n    }\n    // eslint-disable-next-line\n  }, [searchQuery, fromDate, toDate, notPayed, skip]);\n\n  useEffect(() => {\n    const _selected = selected\n      .slice()\n      .filter(({ _id }) => list.find((item) => item._id === _id));\n    setSelected(_selected);\n    // eslint-disable-next-line\n  }, [list]);\n\n  useEffect(() => {\n    if (print) {\n      const to = setTimeout(() => {\n        window.print();\n        setPrint(false);\n        // Delay 225 because modal dialog has opacity transition 225ms long\n      }, 225);\n      return () => clearTimeout(to);\n    }\n  }, [print]);\n\n  const total = useMemo(\n    () =>\n      selected.map((item) => derived(item)).reduce((a, { due }) => a + due, 0),\n    [selected]\n  );\n\n  if (!list) {\n    return <Loader />;\n  }\n\n  const handleToggle = (performance) => () => {\n    const index = selected.findIndex((item) => item._id === performance._id);\n    if (index === -1) {\n      setSelected([...selected, performance]);\n    } else {\n      const _selected = selected.slice();\n      _selected.splice(index, 1);\n      setSelected(_selected);\n    }\n  };\n\n  const handleToggleAll = () => {\n    if (selected.length === list.length) {\n      setSelected([]);\n    } else {\n      setSelected(list.slice());\n    }\n  };\n\n  const handleSearch = (_, q) => {\n    if (q === \"\") {\n      setSearchQuery(\"\");\n    } else {\n      setSearchQuery(q);\n    }\n  };\n\n  const handleClear = () => {\n    setSearchQuery(\"\");\n  };\n\n  const handlePrint = (props) => {\n    setPrint(true);\n    // console.log(props);\n    setPrintProps(props);\n  };\n\n  const handleUpdate = () => {\n    const _list = list.map((item) => {\n      if (!!selected.find((itm) => itm._id === item._id)) {\n        return { ...item, payed: true };\n      }\n      return item;\n    });\n    setList(_list);\n  };\n\n  return (\n    <Page\n      header={\n        <Header\n          leftAction={[\n            <BackIconButton key=\"back\" />,\n            <HeaderSearchField\n              key=\"search\"\n              fullWidth\n              placeholder={t(\"Performance.Search\")}\n              onSearch={handleSearch}\n              onClear={handleClear}\n            />,\n          ]}\n          rightAction={[\n            <Push key=\"create\" replace href=\"/tracker\">\n              <IconButton disabled={selected.length !== 0}>\n                <AddIcon />\n              </IconButton>\n            </Push>,\n            <PayDialogButton\n              key=\"pay\"\n              selected={selected}\n              onUpdate={handleUpdate}\n            />,\n            // <IconButton\n            //   key=\"print\"\n            //   disabled={selected.length === 0}\n            //   onClick={handlePrint}\n            // >\n            //   <PrintIcon />\n            // </IconButton>,\n            <PrintModal\n              key=\"print\"\n              disabled={selected.length === 0}\n              onPrint={handlePrint}\n            />,\n            <Checkbox\n              key=\"select\"\n              checked={list.length > 0 && list.length === selected.length}\n              indeterminate={\n                selected.length > 0 && selected.length < list.length\n              }\n              onChange={handleToggleAll}\n              disabled={list.length === 0}\n            />,\n          ]}\n        >\n          <Box ml={1}>\n            {t(\"Performance.Total\")}: {total.toFixed(2)}\n            {settings.currency}\n          </Box>\n        </Header>\n      }\n      content={\n        <Content>\n          <Paper>\n            <Box padding={2}>\n              <Grid container justify=\"space-around\">\n                <Grid item xs={12} sm=\"auto\">\n                  <KeyboardDatePicker\n                    fullWidth\n                    clearable\n                    label={t(\"Performance.From\")}\n                    value={fromDate}\n                    onChange={(date) => setFromDate(date)}\n                    maxDate={new Date()}\n                    format=\"dd/MM/yyyy\"\n                  />\n                </Grid>\n                <Grid item xs={12} sm=\"auto\">\n                  <KeyboardDatePicker\n                    fullWidth\n                    clearable\n                    label={t(\"Performance.To\")}\n                    value={toDate}\n                    onChange={(date) => setToDate(date)}\n                    maxDate={new Date()}\n                    format=\"dd/MM/yyyy\"\n                  />\n                </Grid>\n                <Grid item xs={12} sm=\"auto\">\n                  <ListItem button onClick={() => setNotPayed(!notPayed)}>\n                    <ListItemIcon>\n                      {notPayed ? (\n                        <CheckIcon color=\"secondary\" />\n                      ) : (\n                        <BlankIcon />\n                      )}\n                    </ListItemIcon>\n                    <ListItemText primary={t(\"Performance.NotPayed\")} />\n                  </ListItem>\n                </Grid>\n              </Grid>\n            </Box>\n          </Paper>\n\n          {list.length === 0 && (\n            <Typography>{t(\"Performance.NoPerformance\")}</Typography>\n          )}\n          <List>\n            <InfiniteScroll\n              dataLength={list.length}\n              next={() => setSkip(skip + 10)}\n              hasMore={true}\n            >\n              {list.map((performance) => {\n                const { _id } = performance;\n                return (\n                  <Push key={_id} href={`/performance/view/${_id}`}>\n                    <PerformanceListItem\n                      performance={performance}\n                      checked={!!selected.find((item) => item._id === _id)}\n                      onToggle={handleToggle(performance)}\n                    />\n                  </Push>\n                );\n              })}\n            </InfiniteScroll>\n          </List>\n        </Content>\n      }\n      print={!!print ? <PrintTable list={selected} {...printProps} /> : null}\n    />\n  );\n}\n\nexport const route = {\n  path: \"/performance\",\n  exact: true,\n  component: Component,\n};\n","import {\n  Box,\n  Grid,\n  List,\n  ListItem,\n  ListItemIcon,\n  ListItemText,\n  ListSubheader,\n  Typography,\n} from \"@material-ui/core\";\n\nimport { GrowTypography } from \"mastro-elfo-mui\";\n\nimport { useSettings } from \"../settings/context\";\nimport { delta2hms, timeDiff } from \"../tracker/utils\";\n\nimport CheckIcon from \"@material-ui/icons/CheckCircle\";\n\nexport default function ViewContent({ performance, print = false }) {\n  const [settings] = useSettings();\n  const {\n    client: { name, surname },\n    discount,\n    end,\n    note,\n    pauses,\n    payed,\n    payments,\n    price,\n    start,\n  } = performance;\n\n  const length = timeDiff(start, end, pauses);\n  const cost = (length / 1000 / 3600) * price;\n  const total = cost - discount;\n  const balance = payments.reduce((acc, { value }) => acc + value, 0);\n  const due = total - balance;\n\n  return (\n    <Box>\n      <Box display=\"flex\" alignItems=\"center\" justifyContent=\"space-between\">\n        <GrowTypography variant=\"h4\">\n          {name} {surname}\n        </GrowTypography>\n        <Box display=\"flex\" alignItems=\"center\">\n          {!!payed && (\n            <ListItemIcon>\n              <CheckIcon color=\"secondary\" />\n            </ListItemIcon>\n          )}\n          <ListItemText\n            primary={\n              <Typography variant=\"h5\">\n                {parseFloat(total).toFixed(2)} {settings.currency}\n              </Typography>\n            }\n            secondary=\"Totale\"\n          />\n        </Box>\n      </Box>\n\n      <Grid container justify=\"space-between\">\n        <Grid item xs={6} sm=\"auto\">\n          <ListItemText\n            primary={new Date(start).toLocaleString()}\n            secondary=\"Inizio\"\n          />\n        </Grid>\n        <Grid item xs={6} sm=\"auto\">\n          <ListItemText\n            primary={new Date(end).toLocaleString()}\n            secondary=\"Fine\"\n          />\n        </Grid>\n        <Grid item xs={6} sm=\"auto\">\n          <ListItemText primary={delta2hms(length)} secondary=\"Durata\" />\n        </Grid>\n      </Grid>\n\n      {!!note && (\n        <Box mb={1}>\n          <Typography variant=\"h6\">Note</Typography>\n          {note.split(\"\\n\").map((p, i) => (\n            <Typography key={i} variant=\"body2\" color=\"textSecondary\">\n              {p}\n            </Typography>\n          ))}\n        </Box>\n      )}\n\n      <Typography variant=\"h6\">Riepilogo</Typography>\n      <Grid container justify=\"space-between\">\n        <Grid item xs={4} sm={3} md=\"auto\">\n          <ListItemText\n            primary={`${parseFloat(price).toFixed(2)} ${settings.currency}/h`}\n            secondary=\"Tariffa\"\n          />\n        </Grid>\n        <Grid item xs={4} sm={3} md=\"auto\">\n          <ListItemText\n            primary={`${parseFloat(cost).toFixed(2)} ${settings.currency}`}\n            secondary=\"Costo\"\n          />\n        </Grid>\n        <Grid item xs={4} sm={3} md=\"auto\">\n          <ListItemText\n            primary={`${parseFloat(discount).toFixed(2)} ${settings.currency}`}\n            secondary=\"Sconto\"\n          />\n        </Grid>\n        <Grid item xs={4} sm={3} md=\"auto\">\n          <ListItemText\n            primary={`${parseFloat(total).toFixed(2)} ${settings.currency}`}\n            secondary=\"Totale\"\n          />\n        </Grid>\n        <Grid item xs={4} sm={3} md=\"auto\">\n          <ListItemText\n            primary={`${parseFloat(balance).toFixed(2)} ${settings.currency}`}\n            secondary=\"Saldo\"\n          />\n        </Grid>\n        <Grid item xs={4} sm={3} md=\"auto\">\n          <ListItemText\n            primary={`${parseFloat(due).toFixed(2)} ${settings.currency}`}\n            secondary=\"Dovuto\"\n          />\n        </Grid>\n      </Grid>\n\n      {!!pauses && pauses.length !== 0 && (\n        <List subheader={<ListSubheader>Pause</ListSubheader>}>\n          {pauses.map(({ end, length, note, start }, i) => (\n            <ListItem key={i}>\n              <ListItemText\n                primary={note}\n                secondary={delta2hms(timeDiff(start, end))}\n              />\n            </ListItem>\n          ))}\n        </List>\n      )}\n\n      {!!payments && payments.length !== 0 && (\n        <List subheader={<ListSubheader>Pagamenti</ListSubheader>}>\n          {payments.map(({ value, date }) => (\n            <ListItem key={date}>\n              <ListItemText\n                primary={`${parseFloat(value).toFixed(2)} ${settings.currency}`}\n                secondary={new Date(date).toLocaleString()}\n              />\n            </ListItem>\n          ))}\n        </List>\n      )}\n    </Box>\n  );\n}\n","import { useEffect, useState } from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport { useSnackbar } from \"notistack\";\nimport { IconButton } from \"@material-ui/core\";\nimport { BackIconButton, Content, Header, Page, Push } from \"mastro-elfo-mui\";\n\nimport ViewContent from \"./ViewContent\";\nimport Loading from \"../loading\";\nimport { read } from \"../../controllers/performance\";\n\nimport EditIcon from \"@material-ui/icons/Edit\";\nimport PrintIcon from \"@material-ui/icons/Print\";\n\nfunction Component() {\n  const { id } = useParams();\n  const { enqueueSnackbar } = useSnackbar();\n  const [performance, setPerformance] = useState();\n\n  useEffect(() => {\n    read(id)\n      .then((doc) => setPerformance(doc))\n      .catch((e) => {\n        console.error(e);\n        enqueueSnackbar(`${e.name} ${e.message}`, { variant: \"error\" });\n      });\n  }, [id, enqueueSnackbar]);\n\n  if (!performance) {\n    return <Loading />;\n  }\n\n  const handlePrint = () => {\n    window.print();\n  };\n\n  const { _id } = performance;\n\n  return (\n    <Page\n      header={\n        <Header\n          leftAction={<BackIconButton />}\n          rightAction={[\n            <IconButton key=\"print\" onClick={handlePrint}>\n              <PrintIcon />\n            </IconButton>,\n            <Push\n              key=\"edit\"\n              href={`/performance/edit/${_id}`}\n              state={performance}\n            >\n              <IconButton>\n                <EditIcon />\n              </IconButton>\n            </Push>,\n          ]}\n        >\n          Prestazione\n        </Header>\n      }\n      content={\n        <Content>\n          <ViewContent performance={performance} />\n        </Content>\n      }\n      print={<ViewContent performance={performance} print={true} />}\n    />\n  );\n}\n\nexport const route = {\n  path: \"/performance/view/:id\",\n  exact: true,\n  component: Component,\n};\n","import { Switch, Redirect, Route } from \"react-router-dom\";\nimport { useTranslation } from \"react-i18next\";\n\nimport { route as Edit } from \"./performance/edit\";\nimport { route as List } from \"./performance/list\";\nimport { route as View } from \"./performance/view\";\n\nimport { useTitle } from \"./utils\";\n\nimport DrawerIcon from \"@material-ui/icons/School\";\n\nfunction Component() {\n  const { t } = useTranslation();\n  useTitle(t(\"Performance.Key_plural\"));\n\n  return (\n    <Switch>\n      <Route {...Edit} />\n      <Route {...List} />\n      <Route {...View} />\n      <Redirect to=\"/notfound\" />\n    </Switch>\n  );\n}\n\nexport const route = {\n  path: \"/performance\",\n  component: Component,\n};\n\nexport const drawer = {\n  key: \"performance\",\n  primary: \"Performance.Key_plural\",\n  secondary: \"\",\n  icon: <DrawerIcon />,\n  title: \"$t(Open) $t(Performance.Key_plural)\",\n};\n","import PropTypes from \"prop-types\";\n\nimport { ListItemIcon, Tooltip, Typography } from \"@material-ui/core\";\n\nimport HelpIcon from \"@material-ui/icons/Help\";\n\nexport default function ListItemHelp({ children, title = \"\" }) {\n  return (\n    <ListItemIcon>\n      <Tooltip\n        arrow\n        title={\n          children ? children : <Typography variant=\"body2\">{title}</Typography>\n        }\n      >\n        <HelpIcon style={{ cursor: \"help\" }} />\n      </Tooltip>\n    </ListItemIcon>\n  );\n}\n\nListItemHelp.propTypes = {\n  children: PropTypes.node,\n  title: PropTypes.string,\n};\n","import { useTranslation } from \"react-i18next\";\n\nimport {\n  Checkbox,\n  FormControlLabel,\n  InputAdornment,\n  List,\n  ListItem,\n  ListSubheader,\n  TextField,\n} from \"@material-ui/core\";\nimport { BackIconButton, Content, Header, Page } from \"mastro-elfo-mui\";\n\nimport DrawerIcon from \"@material-ui/icons/Settings\";\n\nimport { useTitle } from \"./utils\";\nimport ListItemHelp from \"./settings/ListItemHelp\";\nimport { useSettings } from \"./settings/context\";\n\nfunction Component() {\n  const [settings, setSettings] = useSettings();\n  const { t } = useTranslation();\n  useTitle(t(\"Settings.Key\"));\n\n  const handleChange = (field, cast = (v) => v) => ({ target: { value } }) =>\n    setSettings({ ...settings, [field]: cast(value) });\n  // const handleSet = (field, cast = (v) => v) => (value) =>\n  // setSettings({ ...settings, [field]: cast(value) });\n\n  const {\n    currency,\n    discountRound,\n    enableDiscountRound,\n    price,\n    printTitle,\n    printBefore,\n    printAfter,\n    printNote,\n  } = settings;\n\n  return (\n    <Page\n      header={\n        <Header leftAction={<BackIconButton />}>{t(\"Settings.Key\")}</Header>\n      }\n      content={\n        <Content>\n          <List\n            subheader={<ListSubheader>{t(\"Settings.General\")}</ListSubheader>}\n          >\n            <ListItem>\n              <ListItemHelp title={t(\"Settings.Price.Tooltip\")} />\n              <TextField\n                fullWidth\n                label={t(\"Settings.Price.Key\")}\n                value={parseFloat(price || 0).toFixed(2)}\n                onChange={handleChange(\"price\", parseFloat)}\n                InputProps={{\n                  startAdornment: (\n                    <InputAdornment position=\"start\">\n                      {currency}/h\n                    </InputAdornment>\n                  ),\n                }}\n              />\n            </ListItem>\n\n            <ListItem>\n              <ListItemHelp title={t(\"Settings.Rounding.Tooltip\")} />\n              <TextField\n                fullWidth\n                label={t(\"Settings.Rounding.Key\")}\n                onChange={handleChange(\"discountRound\", parseFloat)}\n                value={parseFloat(discountRound || 0).toFixed(2)}\n                disabled={!enableDiscountRound}\n                InputProps={{\n                  startAdornment: (\n                    <InputAdornment position=\"start\">{currency}</InputAdornment>\n                  ),\n                  endAdornment: (\n                    <InputAdornment position=\"end\">\n                      <Checkbox\n                        checked={enableDiscountRound}\n                        onChange={handleChange(\n                          \"enableDiscountRound\",\n                          () => !enableDiscountRound\n                        )}\n                      />\n                    </InputAdornment>\n                  ),\n                }}\n              />\n            </ListItem>\n\n            <ListItem>\n              <ListItemHelp title={t(\"Settings.Currency.Tooltip\")} />\n              <TextField\n                fullWidth\n                label={t(\"Settings.Currency.Key\")}\n                onChange={handleChange(\"currency\")}\n                value={currency}\n              />\n            </ListItem>\n          </List>\n\n          <List\n            subheader={<ListSubheader>{t(\"Settings.Print\")}</ListSubheader>}\n          >\n            <ListItem>\n              <ListItemHelp title={t(\"Settings.PrintTitle.Tooltip\")} />\n              <TextField\n                fullWidth\n                label={t(\"Settings.PrintTitle.Key\")}\n                onChange={handleChange(\"printTitle\")}\n                value={printTitle}\n              />\n            </ListItem>\n            <ListItem>\n              <ListItemHelp title={t(\"Settings.PrintBefore.Tooltip\")} />\n              <TextField\n                fullWidth\n                label={t(\"Settings.PrintBefore.Key\")}\n                onChange={handleChange(\"printBefore\")}\n                value={printBefore}\n                multiline\n                rows={2}\n                rowsMax={4}\n              />\n            </ListItem>\n            <ListItem>\n              <ListItemHelp title={t(\"Settings.PrintAfter.Tooltip\")} />\n              <TextField\n                fullWidth\n                label={t(\"Settings.PrintAfter.Key\")}\n                onChange={handleChange(\"printAfter\")}\n                value={printAfter}\n                multiline\n                rows={2}\n                rowsMax={4}\n              />\n            </ListItem>\n            <ListItem>\n              <ListItemHelp title={t(\"Settings.PrintNote.Tooltip\")} />\n              <FormControlLabel\n                control={\n                  <Checkbox\n                    checked={printNote}\n                    onChange={handleChange(\"printNote\", () => !printNote)}\n                  />\n                }\n                label={t(\"Settings.PrintNote.Key\")}\n              />\n            </ListItem>\n          </List>\n\n          {\n            //   <List\n            //   subheader={\n            //     <ListSubheader>{t(\"Settings.Introduction\")}</ListSubheader>\n            //   }\n            // >\n            //   <ListItem\n            //     button\n            //     onClick={() => setSettings({ ...settings, intro: true })}\n            //   >\n            //     <ListItemHelp>\n            //       <Typography variant=\"body2\">\n            //         {t(\"Settings.Intro.Click to watch again\")}\n            //       </Typography>\n            //     </ListItemHelp>\n            //     <ListItemText primary={t(\"Settings.Intro.Watch Again\")} />\n            //   </ListItem>\n            // </List>\n          }\n        </Content>\n      }\n    />\n  );\n}\n\nexport const route = {\n  path: \"/settings\",\n  exact: true,\n  component: Component,\n};\n\nexport const drawer = {\n  key: \"settings\",\n  primary: \"Settings.Key\",\n  secondary: \"\",\n  icon: <DrawerIcon />,\n  title: \"$t(Open) $t(Settings.Key)\",\n};\n","\nimport React, { createContext, useContext, useState } from \"react\";\n\nconst Context = createContext();\n\nexport function useTracker() {\n  return useContext(Context);\n}\n\nexport default function TrackerProvider({ children, defaultValue }) {\n  const value = useState(defaultValue);\n  return <Context.Provider value={value}>{children}</Context.Provider>;\n}\n\n","import { Fragment, useState } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport { useSnackbar } from \"notistack\";\nimport { debounce } from \"lodash\";\nimport { useTranslation } from \"react-i18next\";\n\nimport { IconButton, TextField } from \"@material-ui/core\";\nimport { Autocomplete } from \"@material-ui/lab\";\n\nimport { useTracker } from \"./context\";\nimport { search } from \"../../controllers/client\";\n\nimport AddIcon from \"@material-ui/icons/Add\";\n\nexport default function Client() {\n  const { push } = useHistory();\n  const { enqueueSnackbar } = useSnackbar();\n  const { t } = useTranslation();\n  const [tracker, setTracker] = useTracker();\n\n  const { client } = tracker || {};\n\n  const [list, setList] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [searchString, setSearchString] = useState(\"\");\n\n  const handleSearch = debounce(({ target: { value } }) => {\n    setLoading(true);\n    setSearchString(value);\n    search(value)\n      .then((docs) => setList(docs))\n      .catch((e) => {\n        console.error(e);\n        enqueueSnackbar(`${e.name} ${e.message}`, { variant: \"error\" });\n      })\n      .finally(() => {\n        setLoading(false);\n      });\n  }, 250);\n\n  const handleChange = (_, client) => setTracker((t) => ({ ...t, client }));\n\n  const handleAdd = () => {\n    const [name, surname] = searchString.split(\" \");\n    push(\"/client/create\", { name, surname });\n  };\n\n  return (\n    <Autocomplete\n      fullWidth\n      freeSolo\n      loading={loading}\n      options={list}\n      getOptionLabel={({ _id, name, surname }) =>\n        _id ? `${name} ${surname}` : \"\"\n      }\n      getOptionSelected={(option, value) => option._id === value._id}\n      value={client || null}\n      onChange={handleChange}\n      renderInput={(props) => (\n        <TextField\n          label={t(\"Client.Key\")}\n          fullWidth\n          onChange={handleSearch}\n          {...props}\n          InputProps={{\n            ...props.InputProps,\n            endAdornment: (\n              <Fragment>\n                {!client && !!searchString && (\n                  <IconButton size=\"small\" onClick={handleAdd}>\n                    <AddIcon />\n                  </IconButton>\n                )}\n                {props.InputProps.endAdornment}\n              </Fragment>\n            ),\n          }}\n        />\n      )}\n    />\n  );\n}\n","import { Fragment, useState } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport { useSnackbar } from \"notistack\";\nimport { useTranslation } from \"react-i18next\";\nimport {\n  Button,\n  Dialog,\n  DialogActions,\n  DialogTitle,\n  DialogContent,\n  DialogContentText,\n  IconButton,\n} from \"@material-ui/core\";\nimport { DangerButton } from \"mastro-elfo-mui\";\n\nimport { useTracker } from \"./context\";\nimport { useSettings } from \"../settings/context\";\nimport { roundCost, timeDiff } from \"./utils\";\nimport { create, fromObject } from \"../../controllers/performance\";\n\nimport StopIcon from \"@material-ui/icons/Stop\";\n\nexport default function StopDialogButton() {\n  const { replace } = useHistory();\n  const { enqueueSnackbar } = useSnackbar();\n  const { t } = useTranslation();\n  const [settings] = useSettings();\n  const [open, setOpen] = useState(false);\n  const [tracker, setTracker] = useTracker();\n\n  const { client, price, pause, pauses, start, status } = tracker || {};\n\n  const handleSave = () => {\n    // Check if a client is selected\n    if (!client) {\n      setOpen(false);\n      return enqueueSnackbar(t(\"Tracker.Snackbar.ClientNotSelected\"), {\n        variant: \"warning\",\n      });\n    }\n    // Check if price is a valid non negative number\n    if (isNaN(price) || price < 0) {\n      setOpen(false);\n      return enqueueSnackbar(t(\"Tracker.Snackbar.PriceNotValid\"), {\n        variant: \"warning\",\n      });\n    }\n\n    const total = (timeDiff(start, pause.start, pauses) / 1000 / 3600) * price;\n    const final = {\n      ...tracker,\n      end: pause.start,\n      status: \"stopped\",\n      payments: [],\n      discount: settings.enableDiscountRound\n        ? roundCost(total, settings.discountRound)\n        : 0,\n    };\n    setTracker(final);\n    enqueueSnackbar(t(\"Tracker.Snackbar.Stopped\"), { variant: \"info\" });\n    create(fromObject(final))\n      .then(({ id }) => {\n        enqueueSnackbar(t(\"Tracker.Snackbar.Saved\"), { variant: \"success\" });\n        setTimeout(replace, 500, `/performance/view/${id}`);\n        setTracker();\n      })\n      .catch((e) => {\n        enqueueSnackbar(t(\"Error.Save\"), { variant: \"error\" });\n      });\n  };\n\n  const handleDiscard = () => {\n    setTracker({\n      note: \"\",\n      pause: null,\n      pauses: [],\n      price: settings.price,\n      start: null,\n      status: null,\n    });\n    enqueueSnackbar(t(\"Tracker.Snackbar.Discarded\"), { variant: \"success\" });\n    setOpen(false);\n  };\n\n  return (\n    <Fragment>\n      <IconButton\n        key=\"_stop\"\n        color=\"inherit\"\n        disabled={!status || status !== \"paused\"}\n        onClick={() => setOpen(true)}\n      >\n        <StopIcon />\n      </IconButton>\n      <Dialog open={open} onClose={() => setOpen(false)}>\n        <DialogTitle>{t(\"Tracker.Stop the tracker\")}</DialogTitle>\n        <DialogContent>\n          <DialogContentText>\n            {t(\"Tracker.Stop the tracker and save the performance\")}\n          </DialogContentText>\n          <DialogContentText>\n            {t(\"Tracker.Discard current tracker\")}\n          </DialogContentText>\n          <DialogContentText>\n            {t(\"Tracker.Cancel to not modify anything\")}\n          </DialogContentText>\n        </DialogContent>\n        <DialogActions>\n          <Button color=\"primary\" variant=\"contained\" onClick={handleSave}>\n            {t(\"Save\")}\n          </Button>\n          <DangerButton variant=\"contained\" onClick={handleDiscard}>\n            {t(\"Delete\")}\n          </DangerButton>\n          <Button onClick={() => setOpen(false)}>{t(\"Cancel\")}</Button>\n        </DialogActions>\n      </Dialog>\n    </Fragment>\n  );\n}\n","import { useSnackbar } from \"notistack\";\nimport { useTranslation } from \"react-i18next\";\n\nimport { IconButton } from \"@material-ui/core\";\n\nimport StopDialogButton from \"./StopDialogButton\";\n\nimport { useTracker } from \"./context\";\nimport { fromObject as pauseFromObject } from \"../../controllers/pause\";\n\nimport StartIcon from \"@material-ui/icons/PlayArrow\";\nimport PauseIcon from \"@material-ui/icons/Pause\";\n\nexport default function Controllers() {\n  const { enqueueSnackbar } = useSnackbar();\n  const { t } = useTranslation();\n  const [tracker, setTracker] = useTracker();\n  const { pause, pauses, status } = tracker || {};\n\n  const handleStart = () => {\n    setTracker({\n      ...tracker,\n      status: \"started\",\n      start: new Date(),\n      pauses: [],\n    });\n    enqueueSnackbar(t(\"Tracker.Snackbar.Started\"), { variant: \"info\" });\n  };\n\n  const handlePause = () => {\n    setTracker({\n      ...tracker,\n      status: \"paused\",\n      pause: pauseFromObject(),\n    });\n    enqueueSnackbar(t(\"Tracker.Snackbar.Paused\"), { variant: \"info\" });\n  };\n\n  const handleResume = () => {\n    const end = new Date();\n    setTracker({\n      ...tracker,\n      status: \"started\",\n      pauses: [{ ...pause, end }, ...(pauses || [])],\n      pause: null,\n    });\n    enqueueSnackbar(t(\"Tracker.Snackbar.Started\"), { variant: \"info\" });\n  };\n\n  return [\n    <StopDialogButton key=\"stop\" />,\n    <IconButton\n      key=\"pause\"\n      color=\"inherit\"\n      disabled={!status || status !== \"started\"}\n      onClick={handlePause}\n    >\n      <PauseIcon />\n    </IconButton>,\n    !!status && (\n      <IconButton\n        key=\"resume\"\n        color=\"inherit\"\n        disabled={status !== \"paused\"}\n        onClick={handleResume}\n      >\n        <StartIcon />\n      </IconButton>\n    ),\n    !status && (\n      <IconButton key=\"play\" color=\"inherit\" onClick={handleStart}>\n        <StartIcon />\n      </IconButton>\n    ),\n  ];\n}\n","import { useEffect, useRef, useState } from \"react\";\nimport { useTracker } from \"./context\";\nimport { TextField } from \"@material-ui/core\";\n\nimport { delta2hms } from \"./utils\";\n\nexport default function Pause() {\n  const [tracker, setTracker] = useTracker();\n  const [pause, setPause] = useState();\n  const [length, setLength] = useState(0);\n  const ref = useRef();\n\n  const { status } = tracker || {};\n  const { note, start } = pause || {};\n\n  useEffect(() => {\n    setPause(tracker.pause);\n    if (ref && ref.current) {\n      ref.current.focus();\n    }\n    // eslint-disable-next-line\n  }, []);\n\n  useEffect(() => {\n    if (status === \"paused\") {\n      const to = setTimeout(() => {\n        setLength(new Date() - start);\n      }, 1000);\n      return () => clearTimeout(to);\n    }\n  }, [length, start, status]);\n\n  useEffect(() => {\n    const to = setTimeout(() => {\n      setTracker({ ...tracker, pause });\n    }, 200);\n    return () => clearTimeout(to);\n    // eslint-disable-next-line\n  }, [pause]);\n\n  if (status !== \"paused\") return null;\n\n  const handleChange = ({ target: { value } }) => {\n    setPause({ ...pause, note: value });\n  };\n\n  return (\n    <TextField\n      fullWidth\n      label={delta2hms(length)}\n      value={note || \"\"}\n      onChange={handleChange}\n      inputRef={ref}\n    />\n  );\n}\n","import { useEffect, useState } from \"react\";\nimport { useTracker } from \"./context\";\nimport { TextField } from \"@material-ui/core\";\n\nimport { delta2hms, timeDiff } from \"../tracker/utils\";\n\nexport default function PauseItem({ index }) {\n  const [tracker, setTracker] = useTracker();\n  const { pauses } = tracker || {};\n\n  const [pause, setPause] = useState(pauses[index]);\n  const { end, note, start } = pause;\n  const length = timeDiff(start, end);\n\n  useEffect(() => {\n    const to = setTimeout(() => {\n      const _pauses = pauses.slice();\n      _pauses[index] = pause;\n      setTracker({ ...tracker, pauses: _pauses });\n    }, 200);\n    return () => clearTimeout(to);\n    // eslint-disable-next-line\n  }, [pause]);\n\n  const handleChange = ({ target: { value } }) =>\n    setPause({ ...pause, note: value });\n\n  return (\n    <TextField\n      fullWidth\n      label={delta2hms(length)}\n      value={note}\n      onChange={handleChange}\n    />\n  );\n}\n","import { useTranslation } from \"react-i18next\";\n\nimport { useTracker } from \"./context\";\nimport { List, ListItem, ListSubheader } from \"@material-ui/core\";\n\nimport Pause from \"./Pause\";\nimport PauseItem from \"./PauseItem\";\n\nexport default function Pauses() {\n  const { t } = useTranslation();\n  const [tracker] = useTracker();\n\n  const { pauses, status } = tracker || { pauses: [] };\n\n  const hasPauses = !!(pauses && pauses.length);\n\n  return (\n    <List\n      subheader={\n        (hasPauses || status === \"paused\") && (\n          <ListSubheader>{t(\"Pause\")}</ListSubheader>\n        )\n      }\n    >\n      {!!status && status === \"paused\" && (\n        <ListItem>\n          <Pause />\n        </ListItem>\n      )}\n      {hasPauses &&\n        pauses.map(({ start }, i) => (\n          <ListItem key={start}>\n            <PauseItem index={i} />\n          </ListItem>\n        ))}\n    </List>\n  );\n}\n","import { Fragment, useEffect, useMemo, useState } from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport { ListItemIcon, ListItemText } from \"@material-ui/core\";\n\nimport { useTracker } from \"./context\";\n\nimport PauseIcon from \"@material-ui/icons/Pause\";\nimport StartIcon from \"@material-ui/icons/PlayArrow\";\nimport StopIcon from \"@material-ui/icons/Stop\";\n\nexport default function Status() {\n  const { t } = useTranslation();\n  const [tracker] = useTracker();\n  const [date, setDate] = useState(new Date());\n  const { start, status } = tracker || {};\n\n  useEffect(() => {\n    if (start) {\n      if (new Date(start) - new Date(date) !== 0) {\n        setDate(new Date(start));\n      }\n    } else {\n      const to = setTimeout(() => {\n        setDate(new Date());\n      }, 1000);\n      return () => clearTimeout(to);\n    }\n  }, [date, start]);\n\n  // const statusLabel = useMemo(\n  //   () =>\n  //     ({ started: \"Avviato\", paused: \"In Pausa\", stopped: \"Fermato\" }[status] ||\n  //     \"Non Avviato\"),\n  //   [status]\n  // );\n\n  const statusIcon = useMemo(\n    () =>\n      ({\n        started: <StartIcon />,\n        paused: <PauseIcon />,\n        stopped: <StopIcon />,\n      }[status] || <StopIcon />),\n    [status]\n  );\n\n  return (\n    <Fragment>\n      <ListItemIcon>{statusIcon}</ListItemIcon>\n      <ListItemText\n        primary={t(`Tracker.Status.${status || \"stopped\"}`)}\n        secondary={t(\"Status\")}\n      />\n      <ListItemText\n        primary={new Date(date).toLocaleDateString()}\n        secondary={t(\"Date\")}\n      />\n      <ListItemText\n        primary={new Date(date).toLocaleTimeString()}\n        secondary={t(\"Time\")}\n      />\n    </Fragment>\n  );\n}\n","import { useEffect, useState } from \"react\";\nimport { useTracker } from \"./context\";\nimport { delta2hms, timeDiff } from \"./utils\";\n\nexport default function Timer() {\n  const [tracker] = useTracker();\n  const [timer, setTimer] = useState(\"00:00:00\");\n  const { pause, pauses, start, status } = tracker || {};\n  useEffect(() => {\n    if (start) {\n      if (status === \"started\") {\n        const to = setTimeout(() => {\n          setTimer(\n            delta2hms(timeDiff(start, pause ? pause.start : new Date(), pauses))\n          );\n        }, 1000);\n        return () => clearTimeout(to);\n      }\n    } else {\n      setTimer(\"00:00:00\");\n    }\n    // eslint-disable-next-line\n  }, [start, status, timer]);\n  return timer;\n}\n","import { merge } from \"./utils\";\n\nexport const defaultValue = {\n  client: null,\n  note: \"\",\n  pause: null,\n  pauses: [],\n  price: 0,\n  start: null,\n  status: null,\n};\n\nexport function fromObject(...data) {\n  return merge(defaultValue, ...data);\n}\n","import { useEffect, useRef } from \"react\";\nimport { useLocation } from \"react-router-dom\";\n\nimport { InputAdornment, List, ListItem, TextField } from \"@material-ui/core\";\n\nimport { BackIconButton, Content, Header, Page } from \"mastro-elfo-mui\";\n\nimport { useTitle } from \"./utils\";\nimport { useSettings } from \"./settings/context\";\nimport Client from \"./tracker/Client\";\nimport Controllers from \"./tracker/Controllers\";\nimport Pauses from \"./tracker/Pauses\";\nimport Status from \"./tracker/Status\";\nimport Timer from \"./tracker/Timer\";\nimport { useTracker } from \"./tracker/context\";\nimport { fromObject } from \"../controllers/tracker\";\n\nimport DrawerIcon from \"@material-ui/icons/HourglassEmpty\";\n\nfunction Component() {\n  useTitle(\"Timer\");\n  const { state } = useLocation();\n  const [settings] = useSettings();\n  const [tracker, setTracker] = useTracker();\n  const pauseRef = useRef();\n\n  const { client, note, pause, price, status } = tracker || {};\n\n  useEffect(() => {\n    // Initialize tracker\n    setTracker(fromObject(tracker, { price: settings.price }, state));\n    // eslint-disable-next-line\n  }, []);\n\n  useEffect(() => {\n    if (client) {\n      setTracker({ ...tracker, price: client.price });\n    }\n    // eslint-disable-next-line\n  }, [client]);\n\n  useEffect(() => {\n    if (status === \"paused\" && pauseRef && pauseRef.current) {\n      pauseRef.current.focus();\n    }\n  }, [status]);\n\n  // Due to react-hooks/exhaustive-deps\n  const _pauseEnd = pause && pause.end;\n  useEffect(() => {\n    if (pause) {\n      const to = setTimeout(\n        () =>\n          setTracker((tracker) => ({\n            ...tracker,\n            pause: { ...tracker.pause, end: new Date() },\n          })),\n        1000\n      );\n      return () => clearTimeout(to);\n    }\n  }, [pause, _pauseEnd, setTracker]);\n\n  const handleChange = (field, cast = (v) => v) => ({ target: { value } }) => {\n    setTracker({ ...tracker, [field]: cast(value) });\n  };\n\n  return (\n    <Page\n      header={\n        <Header leftAction={<BackIconButton />} rightAction={<Controllers />}>\n          <Timer />\n        </Header>\n      }\n      content={\n        <Content>\n          <List>\n            <ListItem>\n              <Status />\n            </ListItem>\n            <ListItem>\n              <Client />\n              <TextField\n                fullWidth\n                label=\"Tariffa\"\n                type=\"number\"\n                value={parseFloat(price || 0).toFixed(2)}\n                onChange={handleChange(\"price\", parseFloat)}\n                InputProps={{\n                  startAdornment: (\n                    <InputAdornment position=\"start\">\n                      {settings.currency}/h\n                    </InputAdornment>\n                  ),\n                }}\n                inputProps={{ min: 0 }}\n              />\n            </ListItem>\n            <ListItem>\n              <TextField\n                fullWidth\n                variant=\"outlined\"\n                multiline\n                rows={4}\n                rowsMax={8}\n                label=\"Note\"\n                value={note}\n                onChange={handleChange(\"note\")}\n              />\n            </ListItem>\n          </List>\n          <Pauses />\n        </Content>\n      }\n    />\n  );\n}\n\nexport const route = {\n  path: \"/tracker\",\n  exact: true,\n  component: Component,\n};\n\nexport const drawer = {\n  key: \"tracker\",\n  primary: \"Tracker.Key\",\n  secondary: \"\",\n  icon: <DrawerIcon />,\n  title: \"$t(Open) $t(Tracker.Key)\",\n};\n","import { Grid, ListItem, ListItemIcon, ListItemText } from \"@material-ui/core\";\nimport { Push } from \"mastro-elfo-mui\";\n\nexport default function ResultItem({ href, icon, ...props }) {\n  return (\n    <Grid item xs={12} sm=\"auto\">\n      <Push href={href}>\n        <ListItem button>\n          {!!icon && <ListItemIcon>{icon}</ListItemIcon>}\n          <ListItemText {...props} />\n        </ListItem>\n      </Push>\n    </Grid>\n  );\n}\n","import { Box, Grid, Typography } from \"@material-ui/core\";\nimport ResultItem from \"./ResultItem\";\n\nexport default function ResultList({\n  Item = ResultItem,\n  Icon,\n  list,\n  title,\n  alt,\n}) {\n  if (!list) return null;\n  return (\n    <Box mb={2}>\n      <Grid container>\n        <Grid item xs={12}>\n          <Typography variant=\"h6\">\n            {title} {list.length > 0 ? `(${list.length})` : \"\"}\n          </Typography>\n        </Grid>\n        <Grid item xs={12} container>\n          {list.length === 0 ? alt : \"\"}\n          {list.map((item) => (\n            <Item icon={Icon ? <Icon /> : <span />} {...item} />\n          ))}\n        </Grid>\n      </Grid>\n    </Box>\n  );\n}\n","import { useEffect, useMemo, useState } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport { useSnackbar } from \"notistack\";\nimport { useTranslation } from \"react-i18next\";\nimport { IconButton, Typography } from \"@material-ui/core\";\n\nimport {\n  DrawerIconButton,\n  DrawerLists,\n  Content,\n  Header,\n  HeaderSearchField,\n  Page,\n  Push,\n} from \"mastro-elfo-mui\";\n\nimport { useTitle } from \"./utils\";\n\n// Import drawer items\nimport { drawer as about } from \"./about\";\nimport { drawer as client } from \"./client\";\nimport { drawer as performance } from \"./performance\";\nimport { drawer as settings } from \"./settings\";\nimport { drawer as tracker } from \"./tracker\";\n\nimport ResultList from \"./dashboard/ResultList\";\nimport { latest, search } from \"../controllers/dashboard\";\nimport { useTracker } from \"./tracker/context\";\n\n// Import icons\nimport TrackerIcon from \"@material-ui/icons/HourglassEmpty\";\nimport TrackerActiveIcon from \"@material-ui/icons/HourglassFull\";\nimport ClientIcon from \"@material-ui/icons/Person\";\nimport PerformanceIcon from \"@material-ui/icons/School\";\n\nfunction Component() {\n  useTitle();\n  const { push } = useHistory();\n  const { enqueueSnackbar } = useSnackbar();\n  const [trackerContext] = useTracker();\n  const { status } = trackerContext || {};\n  const [clientList, setClientList] = useState();\n  const [performanceList, setPerformanceList] = useState();\n  const [didSearch, setDidSearch] = useState(false);\n  const { t } = useTranslation();\n\n  useEffect(() => {\n    if (!didSearch) {\n      setDidSearch(true);\n      latest()\n        .then(([clients, performances]) => {\n          setClientList(clients);\n          setPerformanceList(performances);\n        })\n        .catch((e) => {\n          console.error(e);\n          enqueueSnackbar(`${e.name} ${e.message}`, { variant: \"error\" });\n        });\n    }\n    // eslint-disable-next-line\n  }, [didSearch]);\n\n  const statusIcon = useMemo(\n    () =>\n      !!status ? <TrackerActiveIcon color=\"secondary\" /> : <TrackerIcon />,\n    [status]\n  );\n\n  const handleSearch = (_, q) => {\n    if (q === \"\") {\n      setDidSearch(false);\n    } else {\n      setDidSearch(true);\n      search(q)\n        .then(([clients, performances]) => {\n          setClientList(clients);\n          setPerformanceList(performances);\n        })\n        .catch((e) => {\n          console.error(e);\n          enqueueSnackbar(`${e.name} ${e.message}`, { variant: \"error\" });\n        });\n    }\n  };\n\n  const handleClear = () => {\n    setDidSearch(false);\n  };\n\n  return (\n    <Page\n      header={\n        <Header\n          leftAction={[\n            <DrawerIconButton key=\"drawer\" color=\"inherit\">\n              <DrawerLists\n                lists={[\n                  {\n                    key: \"pages\",\n                    items: [\n                      {\n                        onClick: () => push(\"/tracker\"),\n                        ...tracker,\n                        primary: t(tracker.primary),\n                        title: t(tracker.title),\n                        secondary: t(`Tracker.Status.${status}`),\n                        icon: statusIcon,\n                      },\n                      {\n                        onClick: () => push(\"/client\"),\n                        ...client,\n                        primary: t(client.primary),\n                        title: t(client.title),\n                      },\n                      {\n                        onClick: () => push(\"/performance\"),\n                        ...performance,\n                        primary: t(performance.primary),\n                        title: t(performance.title),\n                      },\n                    ],\n                  },\n                  {\n                    key: \"app\",\n                    items: [\n                      {\n                        onClick: () => push(\"/about\"),\n                        ...about,\n                        primary: t(about.primary),\n                        title: t(about.title),\n                      },\n                      {\n                        onClick: () => push(\"/settings\"),\n                        ...settings,\n                        primary: t(settings.primary),\n                        title: t(settings.title),\n                      },\n                    ],\n                  },\n                ]}\n              />\n            </DrawerIconButton>,\n            <HeaderSearchField\n              key=\"search\"\n              fullWidth\n              placeholder={t(\"Search\")}\n              onSearch={handleSearch}\n              onClear={handleClear}\n            />,\n          ]}\n          rightAction={\n            <Push href=\"/tracker\">\n              <IconButton color=\"inherit\">{statusIcon}</IconButton>\n            </Push>\n          }\n        ></Header>\n      }\n      content={\n        <Content>\n          <ResultList\n            title={t(\"Client.Key\", {\n              count: clientList ? clientList.length : 0,\n            })}\n            Icon={ClientIcon}\n            list={\n              !!clientList &&\n              clientList.map(({ _id, name, surname, contacts }) => ({\n                _id,\n                key: _id,\n                primary: `${name} ${surname}`,\n                secondary: contacts && contacts.length ? contacts[0].value : \"\",\n                href: `/client/view/${_id}`,\n              }))\n            }\n            alt={<Typography>{t(\"Client.NoClient\")}</Typography>}\n          />\n          <ResultList\n            title={t(\"Performance.Key\", {\n              count: performanceList ? performanceList.length : 0,\n            })}\n            Icon={PerformanceIcon}\n            list={\n              !!performanceList &&\n              performanceList.map(\n                ({ _id, client: { name, surname }, note, start }) => ({\n                  _id,\n                  key: _id,\n                  primary: `${name} ${surname} - ${new Date(\n                    start\n                  ).toLocaleString()}`,\n                  secondary: note,\n                  href: `/performance/view/${_id}`,\n                })\n              )\n            }\n            alt={<Typography>{t(\"Performance.NoPerformance\")}</Typography>}\n          />\n        </Content>\n      }\n    />\n  );\n}\n\nexport const route = {\n  path: \"/\",\n  exact: true,\n  component: Component,\n};\n","import { latest as latest_client, search as search_client } from \"./client\";\nimport {\n  latest as latest_performance,\n  search as search_performance,\n} from \"./performance\";\n\nexport function latest() {\n  return Promise.all([latest_client(), latest_performance({})]);\n}\n\nexport function search(query) {\n  return Promise.all([search_client(query), search_performance(query)]);\n}\n","import { useTranslation } from \"react-i18next\";\n\nimport {\n  IconButton,\n  List,\n  ListItem,\n  ListItemIcon,\n  ListItemText,\n  Typography,\n} from \"@material-ui/core\";\nimport { Content, Header, Page, Push } from \"mastro-elfo-mui\";\n\nimport { useTitle } from \"./utils\";\n\nimport DashboardIcon from \"@material-ui/icons/Dashboard\";\n\nfunction Component() {\n  const { t } = useTranslation();\n\n  useTitle(`404 ${t(\"Page Not Found\")}`);\n  return (\n    <Page\n      header={\n        <Header\n          leftAction={\n            <Push replace href=\"/\">\n              <IconButton>\n                <DashboardIcon />\n              </IconButton>\n            </Push>\n          }\n        >\n          {t(\"Page Not Found\")}\n        </Header>\n      }\n      content={\n        <Content>\n          <Typography paragraph>{t(\"NotFound.Content\")}</Typography>\n          <List>\n            <Push href=\"/\" replace>\n              <ListItem button>\n                <ListItemIcon>\n                  <DashboardIcon />\n                </ListItemIcon>\n                <ListItemText\n                  primary=\"Dashboard\"\n                  secondary={t(\"NotFound.Back to Dashboard\")}\n                />\n              </ListItem>\n            </Push>\n          </List>\n        </Content>\n      }\n    />\n  );\n}\n\nexport const route = {\n  path: \"/notfound\",\n  exact: true,\n  component: Component,\n};\n","import { useMemo } from \"react\";\nimport { styled } from \"@material-ui/core/styles\";\n\nexport default function FullPage({ Component, ...props }) {\n  const StyledComponent = useMemo(\n    () =>\n      styled(Component)(() => ({\n        width: \"100vw\",\n        height: \"100vh\",\n      })),\n    [Component]\n  );\n  return <StyledComponent {...props} />;\n}\n","import { styled } from \"@material-ui/core/styles\";\nimport { Paper } from \"@material-ui/core\";\n\nconst Component = styled(Paper)(({ theme }) => ({\n  background: theme.palette.primary.main,\n  color: theme.palette.getContrastText(theme.palette.primary.main),\n}));\n\nexport default function ThemePaper(props) {\n  return <Component {...props} />;\n}\n","import { Grid } from \"@material-ui/core\";\nimport FullPage from \"./FullPage\";\nimport ThemePaper from \"./ThemePaper\";\n\nexport default function AppLoading({ children }) {\n  return (\n    <ThemePaper square elevation={0}>\n      <FullPage\n        Component={Grid}\n        container\n        alignItems=\"center\"\n        justify=\"center\"\n        alignContent=\"center\"\n      >\n        <Grid item>{children}</Grid>\n      </FullPage>\n    </ThemePaper>\n  );\n}\n","import { LinearProgress, Typography } from \"@material-ui/core\";\nimport AppLoading from \"./components/AppLoading\";\n\nexport default function AppLoader({ children, loading }) {\n  if (loading) {\n    return (\n      <AppLoading>\n        <Typography variant=\"h3\">Loading</Typography>\n        <LinearProgress variant=\"indeterminate\" color=\"secondary\" />\n      </AppLoading>\n    );\n  }\n  return children;\n}\n","import { useEffect, useState } from \"react\";\n\nimport { AppContainer } from \"mastro-elfo-mui\";\nimport { BrowserRouter } from \"react-router-dom\";\nimport useMediaQuery from \"@material-ui/core/useMediaQuery\";\nimport primary from \"@material-ui/core/colors/purple\";\nimport secondary from \"@material-ui/core/colors/pink\";\nimport DateFnsUtils from \"@date-io/date-fns\"; // choose your lib\nimport { MuiPickersUtilsProvider } from \"@material-ui/pickers\";\n\n// Import routes\nimport { route as about } from \"./pages/about\";\nimport { route as client } from \"./pages/client\";\nimport { route as dashboard } from \"./pages/dashboard\";\nimport { route as notfound } from \"./pages/notfound\";\nimport { route as performance } from \"./pages/performance\";\nimport { route as settings } from \"./pages/settings\";\nimport { route as tracker } from \"./pages/tracker\";\n// Aside\nimport AppLoader from \"./AppLoader\";\n// import Intro from \"./pages/intro\";\n\n// Import contextes\nimport SettingsProvider from \"./pages/settings/context\";\nimport TrackerProvider from \"./pages/tracker/context\";\n\nimport { init as client_init } from \"./controllers/client\";\nimport { init as performance_init } from \"./controllers/performance\";\n\nexport default function App() {\n  const [initialized, setInitialized] = useState(false);\n  const prefersDarkMode = useMediaQuery(\"(prefers-color-scheme: dark)\");\n\n  useEffect(() => {\n    if (!initialized) {\n      async function init() {\n        await client_init();\n        await performance_init();\n        setInitialized(true);\n      }\n      init();\n    }\n  }, [initialized]);\n\n  return (\n    <AppContainer\n      ThemeProps={{\n        palette: {\n          primary,\n          secondary,\n          type: prefersDarkMode ? \"dark\" : \"light\",\n        },\n      }}\n      RouterProps={{\n        Router: BrowserRouter,\n        routes: [\n          about,\n          client,\n          dashboard,\n          notfound,\n          performance,\n          settings,\n          tracker,\n        ],\n        basename: \"/klepsydra\",\n      }}\n      WrapperProps={{\n        Children: [\n          { Component: AppLoader, loading: !initialized },\n          { Component: SettingsProvider },\n          // { Component: Intro },\n          {\n            Component: TrackerProvider,\n          },\n          { Component: MuiPickersUtilsProvider, utils: DateFnsUtils },\n        ],\n      }}\n      NotifyProps={{\n        anchorOrigin: {\n          vertical: \"bottom\",\n          horizontal: \"center\",\n        },\n      }}\n      ConfigProps={{\n        TopFab: { color: \"secondary\", size: \"small\" },\n      }}\n    />\n  );\n}\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import i18n from \"i18next\";\nimport Backend from \"i18next-chained-backend\";\nimport LanguageDetector from \"i18next-browser-languagedetector\";\nimport { initReactI18next } from \"react-i18next\";\nimport LocalStorageBackend from \"i18next-localstorage-backend\";\nimport Fetch from \"i18next-fetch-backend\";\nimport { version } from \"./version.json\";\nimport { LocalStorageBackendOptions } from \"./i18n.json\";\n\ni18n\n  .use(Backend)\n  .use(LanguageDetector)\n  .use(initReactI18next)\n  .init({\n    // debug: true,\n    fallbackLng: \"en\",\n    // defaultNS: \"translation\",\n    backend: {\n      backends: [LocalStorageBackend, Fetch],\n      backendOptions: [\n        {\n          prefix: \"i18next_res_\",\n          expirationTime: 7 * 24 * 60 * 60 * 1000,\n          defaultVersion: version,\n          ...LocalStorageBackendOptions,\n        },\n        {\n          loadPath: \"/klepsydra/locales/{{lng}}/{{ns}}.json\",\n        },\n      ],\n    },\n  });\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport reportWebVitals from \"./reportWebVitals\";\nimport \"./i18n\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}